@using Microsoft.Extensions.Options
@using Microsoft.EntityFrameworkCore;
@using SiappGasIn.Models
@inject IOptions<SiappGasIn.Services.IdentityDefaultOptions> identityDefaultOptionsAcc
    @inject Microsoft.AspNetCore.Identity.UserManager<ApplicationUser> userManager
        @inject SiappGasIn.Data.ApplicationDbContext dbContext

        @{

        SiappGasIn.Services.IdentityDefaultOptions identityOptions = null;

        try
        {
        var currentUserId = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier).Value;
        var users = await userManager.FindByIdAsync(currentUserId);

        identityOptions = identityDefaultOptionsAcc.Value;

        }
        catch
        {

        }

        }

        @{
        ViewData["Title"] = "Cluster Simulation Cost";
        }

        <div class="alert alert-warning alert-dismissible agri" id="_alert1">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError1"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert2">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError2"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert3">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError3"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert4">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError4"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert5">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError5"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert6">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError6"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert7">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError7"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert8">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError8"></span> is required.
        </div>
        <div class="alert alert-warning alert-dismissible agri" id="_alert9">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Warning!</strong> <span id="textError9"></span> is required.
        </div>
        <div class="container body koes" style="padding-left:230px;padding-right:230px;right: 0px;left: 0px;">

            <div class="card">
                <div class="row ">
                    <div class="col-md-12 px-3">
                        <div class="card-block" style="border: 1px;">
                            <div class="row">
                                <div class="col-md-7">
                                    <h5 class="card-title font-bold batasAtas">Cost Structure Simulation Software</h5>
                                </div>
                                <div class="col-md-5"><img src="@Url.Content("~/adminlte/images/logos.png")"
                                        class="image-responsive" style="width:120px; height:40px; float: right;"></div>
                            </div>

                            <div id="headerCluster" class="card" style="margin-top: 7px;">
                                <div class="card-body" style="margin: 15px ;">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="col-md-3">
                                                <label class="mr-3 font-size-lg mb-0"> Jumlah Pelanggan </label>
                                                <div class="input-group">
                                                    <span class="input-group-btn">
                                                        <button type="button" class="btn btn-default btn-sm btn-number"
                                                            disabled="disabled" data-type="minus" data-field="quant[1]">
                                                            <span class="glyphicon glyphicon-minus"></span>
                                                        </button>
                                                    </span>
                                                    <input type="text" name="quant[1]"
                                                        style="padding-top: 2px;padding-bottom: 2px;"
                                                        class="form-control input-sm input-number" value="1" min="1"
                                                        max="7">
                                                    <span class="input-group-btn">
                                                        <button type="button" class="btn btn-default btn-sm btn-number"
                                                            data-type="plus" data-field="quant[1]">
                                                            <span class="glyphicon glyphicon-plus"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="mr-3 font-size-lg mb-0"> Pilih Pelanggan </label>
                                                <div class="input-group">
                                                    <select class="form-control input-sm frmInput"
                                                        style="width:150px; height:30px; padding-top: 2px;padding-bottom: 2px;border-radius:5px;"
                                                        id="list-capel" name="list_capel" onchange="changeCapel(this)">
                                                        <option value="costStructure1" selected> Pelanggan 1</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="mr-3 font-size-lg mb-0">&nbsp;&nbsp; Gas Source </label>
                                                <div class="input-group">
                                                    
                                                <div class="control-label col-md-4 col-sm-4 ">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" id="cng" value=""> CNG
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="control-label col-md-4 col-sm-4 ">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" onclick="functionLNG()" id="lng"
                                                                value=""> LNG
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="control-label col-md-4 col-sm-4 ">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" id="pipeLine"
                                                                onclick="functionPipe()" value=""> Pipeline
                                                        </label>
                                                    </div>
                                                </div>
                                                </div>
                                                
                                            </div>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>

                            @* //------------------------------COST STRUCTURE-----------------------------------//*@

                            <div id="costStructure1">
                                <div class="card example-1 scrollbar-deep-purple bordered-deep-purple thin"
                                    style="margin-top: 7px;">
                                    <div class="card-body" style="margin: 15px ;">
                                        <form class="form-horizontal form-label-left">
                                            <label>Pelanggan ke-1</label>
                                            <hr style="border-top: 4px solid #eee; margin-top:0;margin-bottom:10px;" />
                                            <label>Input Form</label>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Project Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput"
                                                        id="projectName1" name="projectName1" type="text"
                                                        autocomplete="off" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Creator</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" id="creator1"
                                                        name="creator1" type="text" placeholder=""
                                                        aria-label=".form-control-sm example"
                                                        value="@userManager.GetUserName(User)" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Date</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="projectDate1" name="projectDate1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <label><strong>Prospective Customer Data</strong></label>
                                            <br />
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Customer Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="customerName1" name="customerName1" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Demand Usage</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="demandUsage1" name="demandUsage1" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;"
                                                    id="satuanPemakaian1">
                                                </span>
                                                <div class="col-md-4 col-sm-4 ">
                                                    <select class="form-control form-control-sm frmInput"
                                                        id="bahanBakar1" style="padding-top: 2px;padding-bottom: 2px;">

                                                    </select>
                                                </div>
                                                <input class="form-control form-control-sm" id="nilaiKalori1"
                                                    name="nilaiKalori1" type="hidden" placeholder=""
                                                    aria-label=".form-control-sm example">
                                                <input type="hidden" id="energyName1" />

                                            </div>
                                            @*<div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>

                                                <div class="col-md-7 col-sm-7 " style="padding-right:0px">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="locationName1" name="locationName1" autocomplete="off"
                                                        placeholder="Search location...."
                                                        aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <a href="#" onclick="addr_search()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:100%; line-height:1;">Search</a>
                                                </div>

                                            </div>*@
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="longitude1" name="longitude1" placeholder="Longitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="latitude1" name="latitude1" placeholder="Latitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>

                                                <div class="col-md-3 col-sm-3 ">
                                                    <a href="#" onclick="mapp1()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:80%; line-height:1;">Find Location</a>
                                                </div>

                                            </div>
                                            @* <div class="form-group row" id="resultMap">
                                                <label class="control-label col-md-3 col-sm-3 "></label>

                                                <div class="col-md-9 col-sm-9">
                                                    <div id="resultText"
                                                        style="border:1px solid; border-radius:5px; padding:10px;margin-top:0px;">
                                                    </div>
                                                </div>
                                            </div>*@
                                            <div class="form-group row ">

                                                <label class="control-label col-md-3 col-sm-3 ">Jam / Hari <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah jam operasional dalam sehari"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="hourDay1" name="hourDay1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="24">
                                                </div>
                                                @*<label class="control-label col-md-3 col-sm-3 ">Target GasIn</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="targetCOD1" name="targetCOD1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>*@
                                                <label class="control-label col-md-3 col-sm-3 ">Hari / Bulan <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah hari operasional dalam sebulan"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="workDay1" name="workDay1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="31">
                                                </div>
                                               
                                            </div>                                           

                                            <div class="form-group row pipeLines">

                                                <label class="control-label col-md-3 col-sm-3 ">Pressure <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="pressure1" name="pressure1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;">barg</span>
                                                <label class="control-label col-md-3 col-sm-3 ">Category <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <select class="form-control form-control-sm frmInput" id="Category1"
                                                        style="padding-top: 2px;padding-bottom: 2px;">
                                                        <option value="Industri">Industri</option>
                                                        <option value="Rumah Tangga">Rumah Tangga</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="lngRow1">
                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Total Customer <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="totalCustomer" name="totalCustomer1"
                                                            placeholder="" autocomplete="off"
                                                            aria-label=".form-control-sm example" min="0">
                                                    </div>
                                                    <label class="control-label col-md-3 col-sm-3 ">Iso Tank <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select
                                                            class="form-control form-control-sm frmInput first-select"
                                                            id="Size1" style="padding-top: 2px;padding-bottom: 2px;">
                                                            <option value="20">20</option>
                                                            <option value="40">40</option>
                                                        </select>
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Volume <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select class="form-control form-control-sm frmInput"
                                                            id="volumes1" style="padding-top: 2px;padding-bottom: 2px;">

                                                        </select>
                                                    </div>

                                                    <label class="control-label col-md-3 col-sm-3 ">Speed Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="speed1" name="speed1" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Quantity of Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="qtyTruck1" name="qtyTruck" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>
                                            </div> 

                                            <div class="ln_solid"></div>


                                        </form>
                                    </div>

                                </div>

                            </div>

                            <!--Batas-->

                            <div id="findMap1">
                                <input type="text" id="radius1" value="50" hidden />
                                <input type="text" id="resultLocationName1" hidden />
                                @* <div style="margin-bottom:10px;">
                                    <div class="form">
                                        <div class="range-wrap">
                                            <input type="text" id="radius" hidden />
                                            <div class="range-value" id="radius-selected"></div>
                                            <input id="range-km" name="range-km" type="range" min="0" max="500"
                                                value="50" step="5" />
                                        </div>
                                    </div>
                                </div>*@

                                <div id="map1" class="map1"></div>

                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="back1()"
                                            class="btn btn-primary btn-sm pull-right RbtnMargin">Submit</button>
                                        <button type="submit" onclick="back1()"
                                            class="btn btn-warning btn-sm pull-right RbtnMargin">Back</button>

                                    </div>
                                </div>
                            </div>


                            <!---------------------------------------- Cost 2 ---------------------------------------->

                            <div id="costStructure2">
                                <div class="card example-1 scrollbar-deep-purple bordered-deep-purple thin"
                                    style="margin-top: 7px;">
                                    <div class="card-body" style="margin: 15px ;">
                                        <form class="form-horizontal form-label-left">
                                            <label>Pelanggan ke-2</label>
                                            <hr style="border-top: 4px solid #eee; margin-top:0;margin-bottom:10px;" />
                                            <label>Input Form</label>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Project Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput"
                                                        id="projectName2" name="projectName2" type="text"
                                                        autocomplete="off" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Creator</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" id="creator2"
                                                        name="creator2" type="text" placeholder=""
                                                        aria-label=".form-control-sm example"
                                                        value="@userManager.GetUserName(User)" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Date</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="projectDate2" name="projectDate2" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <label><strong>Prospective Customer Data</strong></label>
                                            <br />
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Customer Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="customerName2" name="customerName2" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Demand Usage</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="demandUsage2" name="demandUsage2" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;"
                                                    id="satuanPemakaian2">
                                                </span>
                                                <div class="col-md-4 col-sm-4 ">
                                                    <select class="form-control form-control-sm frmInput"
                                                        id="bahanBakar2" style="padding-top: 2px;padding-bottom: 2px;">

                                                    </select>
                                                </div>
                                                <input class="form-control form-control-sm" id="nilaiKalori2"
                                                    name="nilaiKalori2" type="hidden" placeholder=""
                                                    aria-label=".form-control-sm example">
                                                <input type="hidden" id="energyName2" />

                                            </div>
                                            @*<div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>

                                                <div class="col-md-7 col-sm-7 " style="padding-right:0px">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="locationName1" name="locationName1" autocomplete="off"
                                                        placeholder="Search location...."
                                                        aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <a href="#" onclick="addr_search()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:100%; line-height:1;">Search</a>
                                                </div>

                                            </div>*@
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="longitude2" name="longitude2" placeholder="Longitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="latitude2" name="latitude2" placeholder="Latitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>

                                                <div class="col-md-3 col-sm-3 ">
                                                    <a href="#" onclick="mapp2()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:80%; line-height:1;">Find Location</a>
                                                </div>

                                            </div>
                                            @* <div class="form-group row" id="resultMap">
                                                <label class="control-label col-md-3 col-sm-3 "></label>

                                                <div class="col-md-9 col-sm-9">
                                                    <div id="resultText"
                                                        style="border:1px solid; border-radius:5px; padding:10px;margin-top:0px;">
                                                    </div>
                                                </div>
                                            </div>*@
                                            <div class="form-group row ">

                                                <label class="control-label col-md-3 col-sm-3 ">Jam / Hari <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah jam operasional dalam sehari"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="hourDay2" name="hourDay2" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="24">
                                                </div>
                                                @*<label class="control-label col-md-3 col-sm-3 ">Target GasIn</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="targetCOD1" name="targetCOD1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>*@
                                                <label class="control-label col-md-3 col-sm-3 ">Hari / Bulan <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah hari operasional dalam sebulan"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="workDay2" name="workDay2" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="31">
                                                </div>
                                            </div>

                                            <div class="form-group row pipeLines">

                                                <label class="control-label col-md-3 col-sm-3 ">Pressure <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="pressure1" name="pressure1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;">barg</span>
                                                <label class="control-label col-md-3 col-sm-3 ">Category <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <select class="form-control form-control-sm frmInput" id="Category1"
                                                        style="padding-top: 2px;padding-bottom: 2px;">
                                                        <option value="Industri">Industri</option>
                                                        <option value="Rumah Tangga">Rumah Tangga</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="lngRow2">
                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Total Customer <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="totalCustomer" name="totalCustomer1"
                                                            placeholder="" autocomplete="off"
                                                            aria-label=".form-control-sm example" min="0">
                                                    </div>
                                                    <label class="control-label col-md-3 col-sm-3 ">Iso Tank <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select
                                                            class="form-control form-control-sm frmInput first-select"
                                                            id="Size1" style="padding-top: 2px;padding-bottom: 2px;">
                                                            <option value="20">20</option>
                                                            <option value="40">40</option>
                                                        </select>
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Volume <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select class="form-control form-control-sm frmInput"
                                                            id="volumes1" style="padding-top: 2px;padding-bottom: 2px;">

                                                        </select>
                                                    </div>

                                                    <label class="control-label col-md-3 col-sm-3 ">Speed Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="speed1" name="speed1" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Quantity of Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="qtyTruck1" name="qtyTruck" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>
                                            </div> 

                                            <div class="ln_solid"></div>


                                        </form>
                                    </div>

                                </div>

                            </div>

                            <!---------------------------------------- Batas ----------------------------------------->

                            <div id="findMap2">
                                <input type="text" id="radius2" value="50" hidden />
                                <input type="text" id="resultLocationName2" hidden />
                                @* <div style="margin-bottom:10px;">
                                    <div class="form">
                                        <div class="range-wrap">
                                            <input type="text" id="radius" hidden />
                                            <div class="range-value" id="radius-selected"></div>
                                            <input id="range-km" name="range-km" type="range" min="0" max="500"
                                                value="50" step="5" />
                                        </div>
                                    </div>
                                </div>*@

                                <div id="map2" class="map2"></div>

                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="back2()"
                                            class="btn btn-primary btn-sm pull-right RbtnMargin">Submit</button>
                                        <button type="submit" onclick="back2()"
                                            class="btn btn-warning btn-sm pull-right RbtnMargin">Back</button>

                                    </div>
                                </div>
                            </div>


                            <!---------------------------------------- Cost 3 ---------------------------------------->

                            <div id="costStructure3">
                                <div class="card example-1 scrollbar-deep-purple bordered-deep-purple thin"
                                    style="margin-top: 7px;">
                                    <div class="card-body" style="margin: 15px ;">
                                        <form class="form-horizontal form-label-left">
                                            <label>Pelanggan ke-3</label>
                                            <hr style="border-top: 4px solid #eee; margin-top:0;margin-bottom:10px;" />
                                            <label>Input Form</label>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Project Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput"
                                                        id="projectName3" name="projectName3" type="text"
                                                        autocomplete="off" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Creator</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" id="creator3"
                                                        name="creator3" type="text" placeholder=""
                                                        aria-label=".form-control-sm example"
                                                        value="@userManager.GetUserName(User)" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Date</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="projectDate3" name="projectDate3" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <label><strong>Prospective Customer Data</strong></label>
                                            <br />
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Customer Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="customerName3" name="customerName3" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Demand Usage</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="demandUsage3" name="demandUsage3" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;"
                                                    id="satuanPemakaian3">
                                                </span>
                                                <div class="col-md-4 col-sm-4 ">
                                                    <select class="form-control form-control-sm frmInput"
                                                        id="bahanBakar3" style="padding-top: 2px;padding-bottom: 2px;">

                                                    </select>
                                                </div>
                                                <input class="form-control form-control-sm" id="nilaiKalori3"
                                                    name="nilaiKalori3" type="hidden" placeholder=""
                                                    aria-label=".form-control-sm example">
                                                <input type="hidden" id="energyName3" />

                                            </div>
                                            @*<div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>

                                                <div class="col-md-7 col-sm-7 " style="padding-right:0px">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="locationName1" name="locationName1" autocomplete="off"
                                                        placeholder="Search location...."
                                                        aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <a href="#" onclick="addr_search()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:100%; line-height:1;">Search</a>
                                                </div>

                                            </div>*@
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="longitude3" name="longitude3" placeholder="Longitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="latitude3" name="latitude3" placeholder="Latitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>

                                                <div class="col-md-3 col-sm-3 ">
                                                    <a href="#" onclick="mapp3()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:80%; line-height:1;">Find Location</a>
                                                </div>

                                            </div>
                                            @* <div class="form-group row" id="resultMap">
                                                <label class="control-label col-md-3 col-sm-3 "></label>

                                                <div class="col-md-9 col-sm-9">
                                                    <div id="resultText"
                                                        style="border:1px solid; border-radius:5px; padding:10px;margin-top:0px;">
                                                    </div>
                                                </div>
                                            </div>*@
                                            <div class="form-group row ">

                                                <label class="control-label col-md-3 col-sm-3 ">Jam / Hari <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah jam operasional dalam sehari"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="hourDay3" name="hourDay3" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="24">
                                                </div>
                                                @*<label class="control-label col-md-3 col-sm-3 ">Target GasIn</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="targetCOD1" name="targetCOD1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>*@
                                                <label class="control-label col-md-3 col-sm-3 ">Hari / Bulan <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah hari operasional dalam sebulan"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="workDay3" name="workDay3" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="31">
                                                </div>
                                            </div>
                                            <div class="form-group row pipeLines">

                                                <label class="control-label col-md-3 col-sm-3 ">Pressure <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="pressure1" name="pressure1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;">barg</span>
                                                <label class="control-label col-md-3 col-sm-3 ">Category <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <select class="form-control form-control-sm frmInput" id="Category1"
                                                        style="padding-top: 2px;padding-bottom: 2px;">
                                                        <option value="Industri">Industri</option>
                                                        <option value="Rumah Tangga">Rumah Tangga</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="lngRow3">
                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Total Customer <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="totalCustomer" name="totalCustomer1"
                                                            placeholder="" autocomplete="off"
                                                            aria-label=".form-control-sm example" min="0">
                                                    </div>
                                                    <label class="control-label col-md-3 col-sm-3 ">Iso Tank <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select
                                                            class="form-control form-control-sm frmInput first-select"
                                                            id="Size1" style="padding-top: 2px;padding-bottom: 2px;">
                                                            <option value="20">20</option>
                                                            <option value="40">40</option>
                                                        </select>
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Volume <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select class="form-control form-control-sm frmInput"
                                                            id="volumes1" style="padding-top: 2px;padding-bottom: 2px;">

                                                        </select>
                                                    </div>

                                                    <label class="control-label col-md-3 col-sm-3 ">Speed Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="speed1" name="speed1" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Quantity of Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="qtyTruck1" name="qtyTruck" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>
                                            </div> 
                                            <div class="ln_solid"></div>
                                        </form>
                                    </div>

                                </div>

                            </div>

                            <!---------------------------------------- Batas ----------------------------------------->

                            <div id="findMap3">
                                <input type="text" id="radius3" value="50" hidden />
                                <input type="text" id="resultLocationName3" hidden />
                                @* <div style="margin-bottom:10px;">
                                    <div class="form">
                                        <div class="range-wrap">
                                            <input type="text" id="radius" hidden />
                                            <div class="range-value" id="radius-selected"></div>
                                            <input id="range-km" name="range-km" type="range" min="0" max="500"
                                                value="50" step="5" />
                                        </div>
                                    </div>
                                </div>*@

                                <div id="map3" class="map3"></div>

                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="back3()"
                                            class="btn btn-primary btn-sm pull-right RbtnMargin">Submit</button>
                                        <button type="submit" onclick="back3()"
                                            class="btn btn-warning btn-sm pull-right RbtnMargin">Back</button>

                                    </div>
                                </div>
                            </div>

                            <!---------------------------------------- Cost 4 ---------------------------------------->

                            <div id="costStructure4">
                                <div class="card example-1 scrollbar-deep-purple bordered-deep-purple thin"
                                    style="margin-top: 7px;">
                                    <div class="card-body" style="margin: 15px ;">
                                        <form class="form-horizontal form-label-left">
                                            <label>Pelanggan ke-4</label>
                                            <hr style="border-top: 4px solid #eee; margin-top:0;margin-bottom:10px;" />
                                            <label>Input Form</label>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Project Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput"
                                                        id="projectName4" name="projectName4" type="text"
                                                        autocomplete="off" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Creator</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" id="creator4"
                                                        name="creator4" type="text" placeholder=""
                                                        aria-label=".form-control-sm example"
                                                        value="@userManager.GetUserName(User)" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Date</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="projectDate4" name="projectDate4" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <label><strong>Prospective Customer Data</strong></label>
                                            <br />
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Customer Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="customerName4" name="customerName4" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Demand Usage</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="demandUsage4" name="demandUsage4" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;"
                                                    id="satuanPemakaian4">
                                                </span>
                                                <div class="col-md-4 col-sm-4 ">
                                                    <select class="form-control form-control-sm frmInput"
                                                        id="bahanBakar4" style="padding-top: 2px;padding-bottom: 2px;">

                                                    </select>
                                                </div>
                                                <input class="form-control form-control-sm" id="nilaiKalori4"
                                                    name="nilaiKalori4" type="hidden" placeholder=""
                                                    aria-label=".form-control-sm example">
                                                <input type="hidden" id="energyName4" />

                                            </div>
                                            @*<div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>

                                                <div class="col-md-7 col-sm-7 " style="padding-right:0px">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="locationName1" name="locationName1" autocomplete="off"
                                                        placeholder="Search location...."
                                                        aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <a href="#" onclick="addr_search()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:100%; line-height:1;">Search</a>
                                                </div>

                                            </div>*@
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="longitude4" name="longitude4" placeholder="Longitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="latitude4" name="latitude4" placeholder="Latitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>

                                                <div class="col-md-3 col-sm-3 ">
                                                    <a href="#" onclick="mapp4()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:80%; line-height:1;">Find Location</a>
                                                </div>

                                            </div>
                                            @* <div class="form-group row" id="resultMap">
                                                <label class="control-label col-md-3 col-sm-3 "></label>

                                                <div class="col-md-9 col-sm-9">
                                                    <div id="resultText"
                                                        style="border:1px solid; border-radius:5px; padding:10px;margin-top:0px;">
                                                    </div>
                                                </div>
                                            </div>*@
                                            <div class="form-group row ">

                                                <label class="control-label col-md-3 col-sm-3 ">Jam / Hari <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah jam operasional dalam sehari"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="hourDay4" name="hourDay4" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="24">
                                                </div>
                                                @*<label class="control-label col-md-3 col-sm-3 ">Target GasIn</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="targetCOD1" name="targetCOD1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>*@
                                                <label class="control-label col-md-3 col-sm-3 ">Hari / Bulan <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah hari operasional dalam sebulan"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="workDay4" name="workDay4" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="31">
                                                </div>
                                            </div>
                                             <div class="form-group row pipeLines">

                                                <label class="control-label col-md-3 col-sm-3 ">Pressure <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="pressure1" name="pressure1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;">barg</span>
                                                <label class="control-label col-md-3 col-sm-3 ">Category <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <select class="form-control form-control-sm frmInput" id="Category1"
                                                        style="padding-top: 2px;padding-bottom: 2px;">
                                                        <option value="Industri">Industri</option>
                                                        <option value="Rumah Tangga">Rumah Tangga</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="lngRow4">
                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Total Customer <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="totalCustomer" name="totalCustomer1"
                                                            placeholder="" autocomplete="off"
                                                            aria-label=".form-control-sm example" min="0">
                                                    </div>
                                                    <label class="control-label col-md-3 col-sm-3 ">Iso Tank <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select
                                                            class="form-control form-control-sm frmInput first-select"
                                                            id="Size1" style="padding-top: 2px;padding-bottom: 2px;">
                                                            <option value="20">20</option>
                                                            <option value="40">40</option>
                                                        </select>
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Volume <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select class="form-control form-control-sm frmInput"
                                                            id="volumes1" style="padding-top: 2px;padding-bottom: 2px;">

                                                        </select>
                                                    </div>

                                                    <label class="control-label col-md-3 col-sm-3 ">Speed Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="speed1" name="speed1" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Quantity of Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="qtyTruck1" name="qtyTruck" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>
                                            </div> 
                                            <div class="ln_solid"></div>
                                        </form>
                                    </div>

                                </div>

                            </div>

                            <!---------------------------------------- Batas ----------------------------------------->

                            <div id="findMap4">
                                <input type="text" id="radius3" value="50" hidden />
                                <input type="text" id="resultLocationName4" hidden />
                                @* <div style="margin-bottom:10px;">
                                    <div class="form">
                                        <div class="range-wrap">
                                            <input type="text" id="radius" hidden />
                                            <div class="range-value" id="radius-selected"></div>
                                            <input id="range-km" name="range-km" type="range" min="0" max="500"
                                                value="50" step="5" />
                                        </div>
                                    </div>
                                </div>*@

                                <div id="map4" class="map4"></div>

                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="back4()"
                                            class="btn btn-primary btn-sm pull-right RbtnMargin">Submit</button>
                                        <button type="submit" onclick="back4()"
                                            class="btn btn-warning btn-sm pull-right RbtnMargin">Back</button>

                                    </div>
                                </div>
                            </div>

                            <!---------------------------------------- Cost 5 ---------------------------------------->
                            <div id="costStructure5">
                                <div class="card example-1 scrollbar-deep-purple bordered-deep-purple thin"
                                    style="margin-top: 7px;">
                                    <div class="card-body" style="margin: 15px ;">
                                        <form class="form-horizontal form-label-left">
                                            <label>Pelanggan ke-5</label>
                                            <hr style="border-top: 4px solid #eee; margin-top:0;margin-bottom:10px;" />
                                            <label>Input Form</label>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Project Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput"
                                                        id="projectName5" name="projectName5" type="text"
                                                        autocomplete="off" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Creator</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" id="creator5"
                                                        name="creator5" type="text" placeholder=""
                                                        aria-label=".form-control-sm example"
                                                        value="@userManager.GetUserName(User)" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Date</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="projectDate5" name="projectDate5" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <label><strong>Prospective Customer Data</strong></label>
                                            <br />
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Customer Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="customerName5" name="customerName5" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Demand Usage</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="demandUsage5" name="demandUsage5" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;"
                                                    id="satuanPemakaian5">
                                                </span>
                                                <div class="col-md-4 col-sm-4 ">
                                                    <select class="form-control form-control-sm frmInput"
                                                        id="bahanBakar5" style="padding-top: 2px;padding-bottom: 2px;">

                                                    </select>
                                                </div>
                                                <input class="form-control form-control-sm" id="nilaiKalori5"
                                                    name="nilaiKalori5" type="hidden" placeholder=""
                                                    aria-label=".form-control-sm example">
                                                <input type="hidden" id="energyName5" />

                                            </div>
                                            @*<div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>

                                                <div class="col-md-7 col-sm-7 " style="padding-right:0px">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="locationName1" name="locationName1" autocomplete="off"
                                                        placeholder="Search location...."
                                                        aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <a href="#" onclick="addr_search()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:100%; line-height:1;">Search</a>
                                                </div>

                                            </div>*@
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="longitude5" name="longitude5" placeholder="Longitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="latitude5" name="latitude5" placeholder="Latitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>

                                                <div class="col-md-3 col-sm-3 ">
                                                    <a href="#" onclick="mapp5()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:80%; line-height:1;">Find Location</a>
                                                </div>

                                            </div>
                                            @* <div class="form-group row" id="resultMap">
                                                <label class="control-label col-md-3 col-sm-3 "></label>

                                                <div class="col-md-9 col-sm-9">
                                                    <div id="resultText"
                                                        style="border:1px solid; border-radius:5px; padding:10px;margin-top:0px;">
                                                    </div>
                                                </div>
                                            </div>*@
                                            <div class="form-group row ">

                                                <label class="control-label col-md-3 col-sm-3 ">Jam / Hari <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah jam operasional dalam sehari"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="hourDay5" name="hourDay5" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="24">
                                                </div>
                                                @*<label class="control-label col-md-3 col-sm-3 ">Target GasIn</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="targetCOD1" name="targetCOD1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>*@
                                                <label class="control-label col-md-3 col-sm-3 ">Hari / Bulan <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah hari operasional dalam sebulan"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="workDay5" name="workDay5" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="31">
                                                </div>
                                            </div>
                                            <div class="form-group row pipeLines">

                                                <label class="control-label col-md-3 col-sm-3 ">Pressure <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="pressure1" name="pressure1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;">barg</span>
                                                <label class="control-label col-md-3 col-sm-3 ">Category <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <select class="form-control form-control-sm frmInput" id="Category1"
                                                        style="padding-top: 2px;padding-bottom: 2px;">
                                                        <option value="Industri">Industri</option>
                                                        <option value="Rumah Tangga">Rumah Tangga</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="lngRow5">
                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Total Customer <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="totalCustomer" name="totalCustomer1"
                                                            placeholder="" autocomplete="off"
                                                            aria-label=".form-control-sm example" min="0">
                                                    </div>
                                                    <label class="control-label col-md-3 col-sm-3 ">Iso Tank <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select
                                                            class="form-control form-control-sm frmInput first-select"
                                                            id="Size1" style="padding-top: 2px;padding-bottom: 2px;">
                                                            <option value="20">20</option>
                                                            <option value="40">40</option>
                                                        </select>
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Volume <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select class="form-control form-control-sm frmInput"
                                                            id="volumes1" style="padding-top: 2px;padding-bottom: 2px;">

                                                        </select>
                                                    </div>

                                                    <label class="control-label col-md-3 col-sm-3 ">Speed Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="speed1" name="speed1" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Quantity of Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="qtyTruck1" name="qtyTruck" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>
                                            </div> 
                                            <div class="ln_solid"></div>
                                        </form>
                                    </div>

                                </div>

                            </div>

                            <!---------------------------------------- Batas ----------------------------------------->

                            <div id="findMap5">
                                <input type="text" id="radius5" value="50" hidden />
                                <input type="text" id="resultLocationName4" hidden />
                                @* <div style="margin-bottom:10px;">
                                    <div class="form">
                                        <div class="range-wrap">
                                            <input type="text" id="radius" hidden />
                                            <div class="range-value" id="radius-selected"></div>
                                            <input id="range-km" name="range-km" type="range" min="0" max="500"
                                                value="50" step="5" />
                                        </div>
                                    </div>
                                </div>*@

                                <div id="map5" class="map5"></div>

                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="back5()"
                                            class="btn btn-primary btn-sm pull-right RbtnMargin">Submit</button>
                                        <button type="submit" onclick="back5()"
                                            class="btn btn-warning btn-sm pull-right RbtnMargin">Back</button>

                                    </div>
                                </div>
                            </div>

                            <!---------------------------------------- Cost 6 ---------------------------------------->

                            <div id="costStructure6">
                                <div class="card example-1 scrollbar-deep-purple bordered-deep-purple thin"
                                    style="margin-top: 7px;">
                                    <div class="card-body" style="margin: 15px ;">
                                        <form class="form-horizontal form-label-left">
                                            <label>Pelanggan ke-6</label>
                                            <hr style="border-top: 4px solid #eee; margin-top:0;margin-bottom:10px;" />
                                            <label>Input Form</label>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Project Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput"
                                                        id="projectName6" name="projectName6" type="text"
                                                        autocomplete="off" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Creator</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" id="creator6"
                                                        name="creator6" type="text" placeholder=""
                                                        aria-label=".form-control-sm example"
                                                        value="@userManager.GetUserName(User)" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Date</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="projectDate6" name="projectDate6" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <label><strong>Prospective Customer Data</strong></label>
                                            <br />
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Customer Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="customerName6" name="customerName6" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Demand Usage</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="demandUsage6" name="demandUsage6" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;"
                                                    id="satuanPemakaian6">
                                                </span>
                                                <div class="col-md-4 col-sm-4 ">
                                                    <select class="form-control form-control-sm frmInput"
                                                        id="bahanBakar6" style="padding-top: 2px;padding-bottom: 2px;">

                                                    </select>
                                                </div>
                                                <input class="form-control form-control-sm" id="nilaiKalori6"
                                                    name="nilaiKalori6" type="hidden" placeholder=""
                                                    aria-label=".form-control-sm example">
                                                <input type="hidden" id="energyName6" />

                                            </div>
                                            @*<div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>

                                                <div class="col-md-7 col-sm-7 " style="padding-right:0px">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="locationName1" name="locationName1" autocomplete="off"
                                                        placeholder="Search location...."
                                                        aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <a href="#" onclick="addr_search()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:100%; line-height:1;">Search</a>
                                                </div>

                                            </div>*@
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="longitude6" name="longitude6" placeholder="Longitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="latitude6" name="latitude6" placeholder="Latitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>

                                                <div class="col-md-3 col-sm-3 ">
                                                    <a href="#" onclick="mapp6()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:80%; line-height:1;">Find Location</a>
                                                </div>

                                            </div>
                                            @* <div class="form-group row" id="resultMap">
                                                <label class="control-label col-md-3 col-sm-3 "></label>

                                                <div class="col-md-9 col-sm-9">
                                                    <div id="resultText"
                                                        style="border:1px solid; border-radius:5px; padding:10px;margin-top:0px;">
                                                    </div>
                                                </div>
                                            </div>*@
                                            <div class="form-group row ">

                                                <label class="control-label col-md-3 col-sm-3 ">Jam / Hari <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah jam operasional dalam sehari"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="hourDay6" name="hourDay6" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="24">
                                                </div>
                                                @*<label class="control-label col-md-3 col-sm-3 ">Target GasIn</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="targetCOD1" name="targetCOD1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>*@
                                                <label class="control-label col-md-3 col-sm-3 ">Hari / Bulan <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah hari operasional dalam sebulan"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="workDay6" name="workDay6" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="31">
                                                </div>
                                            </div>
                                            <div class="form-group row pipeLines">

                                                <label class="control-label col-md-3 col-sm-3 ">Pressure <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="pressure1" name="pressure1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;">barg</span>
                                                <label class="control-label col-md-3 col-sm-3 ">Category <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <select class="form-control form-control-sm frmInput" id="Category1"
                                                        style="padding-top: 2px;padding-bottom: 2px;">
                                                        <option value="Industri">Industri</option>
                                                        <option value="Rumah Tangga">Rumah Tangga</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="lngRow6">
                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Total Customer <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="totalCustomer" name="totalCustomer1"
                                                            placeholder="" autocomplete="off"
                                                            aria-label=".form-control-sm example" min="0">
                                                    </div>
                                                    <label class="control-label col-md-3 col-sm-3 ">Iso Tank <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select
                                                            class="form-control form-control-sm frmInput first-select"
                                                            id="Size1" style="padding-top: 2px;padding-bottom: 2px;">
                                                            <option value="20">20</option>
                                                            <option value="40">40</option>
                                                        </select>
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Volume <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select class="form-control form-control-sm frmInput"
                                                            id="volumes1" style="padding-top: 2px;padding-bottom: 2px;">

                                                        </select>
                                                    </div>

                                                    <label class="control-label col-md-3 col-sm-3 ">Speed Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="speed1" name="speed1" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Quantity of Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="qtyTruck1" name="qtyTruck" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>
                                            </div> 
                                            <div class="ln_solid"></div>
                                        </form>
                                    </div>

                                </div>

                            </div>

                            <!---------------------------------------- Batas ----------------------------------------->

                            <div id="findMap6">
                                <input type="text" id="radius6" value="50" hidden />
                                <input type="text" id="resultLocationName6" hidden />
                                @* <div style="margin-bottom:10px;">
                                    <div class="form">
                                        <div class="range-wrap">
                                            <input type="text" id="radius" hidden />
                                            <div class="range-value" id="radius-selected"></div>
                                            <input id="range-km" name="range-km" type="range" min="0" max="500"
                                                value="50" step="5" />
                                        </div>
                                    </div>
                                </div>*@

                                <div id="map6" class="map6"></div>

                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="back6()"
                                            class="btn btn-primary btn-sm pull-right RbtnMargin">Submit</button>
                                        <button type="submit" onclick="back6()"
                                            class="btn btn-warning btn-sm pull-right RbtnMargin">Back</button>

                                    </div>
                                </div>
                            </div>


                            <!---------------------------------------- Cost 7 ---------------------------------------->

                            <div id="costStructure7">
                                <div class="card example-1 scrollbar-deep-purple bordered-deep-purple thin"
                                    style="margin-top: 7px;">
                                    <div class="card-body" style="margin: 15px ;">
                                        <form class="form-horizontal form-label-left">
                                            <label>Pelanggan ke-7</label>
                                            <hr style="border-top: 4px solid #eee; margin-top:0;margin-bottom:10px;" />
                                            <label>Input Form</label>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Project Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput"
                                                        id="projectName7" name="projectName7" type="text"
                                                        autocomplete="off" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Creator</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" id="creator7"
                                                        name="creator7" type="text" placeholder=""
                                                        aria-label=".form-control-sm example"
                                                        value="@userManager.GetUserName(User)" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Date</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="projectDate7" name="projectDate7" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <label><strong>Prospective Customer Data</strong></label>
                                            <br />
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Customer Name</label>
                                                <div class="col-md-9 col-sm-9 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="customerName7" name="customerName7" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                            </div>
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Demand Usage</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="demandUsage7" name="demandUsage7" autocomplete="off"
                                                        placeholder="" aria-label=".form-control-sm example">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;"
                                                    id="satuanPemakaian7">
                                                </span>
                                                <div class="col-md-4 col-sm-4 ">
                                                    <select class="form-control form-control-sm frmInput"
                                                        id="bahanBakar7" style="padding-top: 2px;padding-bottom: 2px;">

                                                    </select>
                                                </div>
                                                <input class="form-control form-control-sm" id="nilaiKalori7"
                                                    name="nilaiKalori7" type="hidden" placeholder=""
                                                    aria-label=".form-control-sm example">
                                                <input type="hidden" id="energyName7" />

                                            </div>
                                            @*<div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>

                                                <div class="col-md-7 col-sm-7 " style="padding-right:0px">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="locationName1" name="locationName1" autocomplete="off"
                                                        placeholder="Search location...."
                                                        aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <a href="#" onclick="addr_search()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:100%; line-height:1;">Search</a>
                                                </div>

                                            </div>*@
                                            <div class="form-group row ">
                                                <label class="control-label col-md-3 col-sm-3 ">Coordinate</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="longitude7" name="longitude7" placeholder="Longitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="text"
                                                        id="latitude7" name="latitude7" placeholder="Latitude"
                                                        autocomplete="off" aria-label=".form-control-sm example">
                                                </div>

                                                <div class="col-md-3 col-sm-3 ">
                                                    <a href="#" onclick="mapp7()" class="btn btn-warning btn-sm"
                                                        style="height:24px; width:80%; line-height:1;">Find Location</a>
                                                </div>

                                            </div>
                                            @* <div class="form-group row" id="resultMap">
                                                <label class="control-label col-md-3 col-sm-3 "></label>

                                                <div class="col-md-9 col-sm-9">
                                                    <div id="resultText"
                                                        style="border:1px solid; border-radius:5px; padding:10px;margin-top:0px;">
                                                    </div>
                                                </div>
                                            </div>*@
                                            <div class="form-group row ">

                                                <label class="control-label col-md-3 col-sm-3 ">Jam / Hari <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah jam operasional dalam sehari"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="hourDay7" name="hourDay7" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="24">
                                                </div>
                                                @*<label class="control-label col-md-3 col-sm-3 ">Target GasIn</label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="date"
                                                        id="targetCOD1" name="targetCOD1" placeholder=""
                                                        aria-label=".form-control-sm example">
                                                </div>*@
                                                <label class="control-label col-md-3 col-sm-3 ">Hari / Bulan <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right"
                                                        title="Jumlah hari operasional dalam sebulan"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="workDay7" name="workDay7" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0" max="31">
                                                </div>
                                            </div>
                                            <div class="form-group row pipeLines">

                                                <label class="control-label col-md-3 col-sm-3 ">Pressure <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-2 col-sm-2 ">
                                                    <input class="form-control form-control-sm frmInput" type="number"
                                                        id="pressure1" name="pressure1" placeholder="" autocomplete="off"
                                                        aria-label=".form-control-sm example" min="0">
                                                </div>
                                                <span class="col-md-1 col-sm-1"
                                                    style="padding-left: -10px; padding-left: -10px; padding-left: 0px;">barg</span>
                                                <label class="control-label col-md-3 col-sm-3 ">Category <i
                                                        class="fas fa-info-circle" data-toggle="tooltip"
                                                        data-placement="right" title="Khusus Pipeline"></i></label>
                                                <div class="col-md-3 col-sm-3 ">
                                                    <select class="form-control form-control-sm frmInput" id="Category1"
                                                        style="padding-top: 2px;padding-bottom: 2px;">
                                                        <option value="Industri">Industri</option>
                                                        <option value="Rumah Tangga">Rumah Tangga</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div id="lngRow7">
                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Total Customer <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="totalCustomer" name="totalCustomer1"
                                                            placeholder="" autocomplete="off"
                                                            aria-label=".form-control-sm example" min="0">
                                                    </div>
                                                    <label class="control-label col-md-3 col-sm-3 ">Iso Tank <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select
                                                            class="form-control form-control-sm frmInput first-select"
                                                            id="Size1" style="padding-top: 2px;padding-bottom: 2px;">
                                                            <option value="20">20</option>
                                                            <option value="40">40</option>
                                                        </select>
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Volume <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <select class="form-control form-control-sm frmInput"
                                                            id="volumes1" style="padding-top: 2px;padding-bottom: 2px;">

                                                        </select>
                                                    </div>

                                                    <label class="control-label col-md-3 col-sm-3 ">Speed Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="speed1" name="speed1" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>

                                                <div class="form-group row">

                                                    <label class="control-label col-md-3 col-sm-3 ">Quantity of Truck <i
                                                            class="fas fa-info-circle" data-toggle="tooltip"
                                                            data-placement="right" title="Khusus LNG"></i></label>
                                                    <div class="col-md-3 col-sm-3 ">
                                                        <input class="form-control form-control-sm frmInput"
                                                            type="number" id="qtyTruck1" name="qtyTruck" placeholder=""
                                                            autocomplete="off" aria-label=".form-control-sm example"
                                                            min="0">
                                                    </div>

                                                </div>
                                            </div> 
                                            <div class="ln_solid"></div>
                                            <input type="hidden" id="finalLokasi" />
                                            <input type="hidden" id="finalLat" />
                                            <input type="hidden" id="finalLong" />
                                        </form>
                                    </div>

                                </div>

                            </div>

                            <!---------------------------------------- Batas ---------------------------------------->

                            <div id="findMap7">
                                <input type="text" id="radius7" value="50" hidden />
                                <input type="text" id="resultLocationName7" hidden />
                                @* <div style="margin-bottom:10px;">
                                    <div class="form">
                                        <div class="range-wrap">
                                            <input type="text" id="radius" hidden />
                                            <div class="range-value" id="radius-selected"></div>
                                            <input id="range-km" name="range-km" type="range" min="0" max="500"
                                                value="50" step="5" />
                                        </div>
                                    </div>
                                </div>*@

                                <div id="map7" class="map7"></div>

                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="back7()"
                                            class="btn btn-primary btn-sm pull-right RbtnMargin">Submit</button>
                                        <button type="submit" onclick="back7()"
                                            class="btn btn-warning btn-sm pull-right RbtnMargin">Back</button>

                                    </div>
                                </div>
                            </div>

                            @*///-------------------------------------------------------------------------------//*@

                            <div id="btnFooter">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12  offset-md-3" style="margin-top:10px ;">
                                        <button type="submit" onclick="calculateCluster()"
                                            class="btn btn-primary pull-right RbtnMargin">Run</button>
                                        <button type="reset"
                                            class="btn btn-warning pull-right RbtnMargin">Reset</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="loading overlay" id="loading">
            <div class="lds-roller">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>

        <span hidden id="gajiSupir"></span>
        <span hidden id="gajiOperator"></span>
        @section Styles{
        <link rel="stylesheet" href="~/plugins/map/css/lib/leaflet.css" />
        <link rel="stylesheet" href="~/plugins/map/css/lib/leaflet-search.mobile.min.css" />
        <link rel="stylesheet" href="~/plugins/map/css/lib/leaflet-search.min.css" />
        <link rel="stylesheet" href="~/plugins/map/css/lib/leaflet.draw.css" />
        <link rel="stylesheet" type="text/css"
            href="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.css">

        <style>
            .lds-roller {
                display: inline-block;
                position: relative;
                width: 80px;
                height: 80px;
                margin-top: 20%;
            }

            .lds-roller div {
                animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
                transform-origin: 40px 40px;
            }

            .lds-roller div:after {
                content: " ";
                display: block;
                position: absolute;
                width: 7px;
                height: 7px;
                border-radius: 50%;
                background: #fd5;
                margin: -4px 0 0 -4px;
            }

            .lds-roller div:nth-child(1) {
                animation-delay: -0.036s;
            }

            .lds-roller div:nth-child(1):after {
                top: 63px;
                left: 63px;
            }

            .lds-roller div:nth-child(2) {
                animation-delay: -0.072s;
            }

            .lds-roller div:nth-child(2):after {
                top: 68px;
                left: 56px;
            }

            .lds-roller div:nth-child(3) {
                animation-delay: -0.108s;
            }

            .lds-roller div:nth-child(3):after {
                top: 71px;
                left: 48px;
            }

            .lds-roller div:nth-child(4) {
                animation-delay: -0.144s;
            }

            .lds-roller div:nth-child(4):after {
                top: 72px;
                left: 40px;
            }

            .lds-roller div:nth-child(5) {
                animation-delay: -0.18s;
            }

            .lds-roller div:nth-child(5):after {
                top: 71px;
                left: 32px;
            }

            .lds-roller div:nth-child(6) {
                animation-delay: -0.216s;
            }

            .lds-roller div:nth-child(6):after {
                top: 68px;
                left: 24px;
            }

            .lds-roller div:nth-child(7) {
                animation-delay: -0.252s;
            }

            .lds-roller div:nth-child(7):after {
                top: 63px;
                left: 17px;
            }

            .lds-roller div:nth-child(8) {
                animation-delay: -0.288s;
            }

            .lds-roller div:nth-child(8):after {
                top: 56px;
                left: 12px;
            }

            @@keyframes lds-roller {
                0% {
                    transform: rotate(0deg);
                }

                100% {
                    transform: rotate(360deg);
                }
            }

            .overlay {
                z-index: 9999;
                position: fixed;
                top: 0px;
                left: 0px;
                bottom: 0px;
                right: 0px;
                background-color: rgba(0, 0, 0, 0.7);
                text-align: center;
            }

            .address {
                cursor: pointer
            }

            .address:hover {
                color: #AA0000;
                text-decoration: underline
            }

            .koes {
                position: absolute;
                top: 55px;
                z-index: -2;
            }

            .agri {
                margin-left: 70%;
                margin-right: 1%;
                margin-top: 10px;
            }

            .map1 {
                height: 370px;
                width: 100%;
            }

            .map2 {
                height: 370px;
                width: 100%;
            }

            .map3 {
                height: 370px;
                width: 100%;
            }

            .map4 {
                height: 370px;
                width: 100%;
            }

            .map5 {
                height: 370px;
                width: 100%;
            }

            .map6 {
                height: 370px;
                width: 100%;
            }

            .map7 {
                height: 370px;
                width: 100%;
            }

            #mapSearchContainer {
                position: fixed;
                top: 20px;
                right: 40px;
                height: 30px;
                width: 180px;
                z-index: 110;
                font-size: 10pt;
                color: #5d5d5d;
                border: solid 1px #bbb;
                background-color: #f8f8f8;
            }

            .geocoder-control-input leaflet-bar {
                height: 30px;
                width: 180px;
            }

            .pointer {
                position: absolute;
                top: 86px;
                left: 60px;
                z-index: 99999;
            }

            .results {
                background-color: white;
                opacity: 0.8;
                position: absolute;
                top: 12px;
                right: 12px;
                width: 320px;
                height: 300px;
                overflow-y: scroll;
            }

            #map .leaflet-bar .leaflet-draw-draw-rectangle,
            #map .leaflet-bar .leaflet-draw-draw-circle,
            #map .leaflet-bar .leaflet-draw-edit-edit,
            #map .leaflet-bar .leaflet-draw-edit-remove {
                display: none;
            }

            .tblConvert {
                width: 15%;
                text-align: center;
                font-size: 12px;
            }
        </style>

        }

        @section Scripts{
        @*
        <script src="~/plugins/map/js/ofi_paf.js"></script>*@
        @*
        <script type="text/javascript" src="~/plugins/map/js/script.js"></script>*@
        <script type="text/javascript" src="~/plugins/map/js/lib/jquery-3.1.0.min.js"></script>
        <script type="text/javascript" src="~/plugins/map/js/lib/leaflet.js"></script>
        <script type="text/javascript" src="~/plugins/map/js/lib/leaflet.draw.js"></script>
        <script src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet/0.0.1-beta.5/esri-leaflet.js"></script>
        <script
            src="https://cdn-geoweb.s3.amazonaws.com/esri-leaflet-geocoder/0.0.1-beta.5/esri-leaflet-geocoder.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

        <script type="text/javascript">
            var results = [];
            let spbgFinal = [];
            let obj = [];
            var resultsLNG = [];

            function pointMap(lat, long) {
                var titik = L.latLng(lat, long);
                L.marker(titik).addTo(map);

                var circle;
                var radius = milesToMeters($("#radius1").val());
                circle = L.circle(titik, radius);
                circle.addTo(map);

                var x = pointsInCircle(circle, radius);
                //console.log(x);
                return x;

            }
            function changeCircleRadius(jarak) {
                //alert(jarak);
                // Determine which geocode box is filled
                // And fire click event
                // This will determine how many markers are within the circle
                pointsInCircle(circle, milesToMeters(jarak))
                // Set radius of circle only if we already have one on the map
                if (circle) {
                    circle.setRadius(milesToMeters(jarak));
                }
            }
            function milesToMeters(miles) {
                return miles * 1069.344;
            };
            function pointsInCircle(circle, meters_user_set) {
                obj = [];
                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    async: false,
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        let mapping = [];
                        for (var i = 0; i < locationMaps.features.length; i++) {
                            var long = locationMaps.features[i].geometry.coordinates[0];
                            var lat = locationMaps.features[i].geometry.coordinates[1];
                            var loc = locationMaps.features[i].properties.oficina;
                            let temp = {
                                "loc": loc,
                                "lat": lat,
                                "long": long
                            }
                            mapping.push(temp);
                        }

                        if (circle !== undefined) {
                            // Only run if we have an address entered
                            // Lat, long of circle
                            circle_lat_long = circle.getLatLng();
                            var counter_points_in_circle = 0;
                            // Loop through each point in JSON file
                            for (var i = 0; i < mapping.length; i++) {
                                // Lat, long of current point
                                let latA = mapping[i].coord;
                                var latlng = L.latLng(mapping[i].lat, mapping[i].long);
                                layer_lat_long = latA;

                                // Distance from our circle marker
                                // To current point in meters
                                distance_from_layer_circle = latlng.distanceTo(circle_lat_long);
                                //calculateDistance(latlng, latB)
                                // See if meters is within raduis
                                // The user has selected
                                if (distance_from_layer_circle <= meters_user_set) {
                                    counter_points_in_circle += 1;
                                    let temp = {
                                        "lokasi": mapping[i].loc,
                                        //"jarak": (distance_from_layer_circle / 1000).toFixed(2),
                                        "jarak": parseFloat((distance_from_layer_circle / 1000).toFixed(2)),
                                        "latitude": mapping[i].lat,
                                        "longitude": mapping[i].long,
                                    }
                                    results.push(temp);
                                }

                            };
                            //farmacias.eachLayer(function (layer) {

                            //});
                            // Set number of results on main page


                        }

                        var result = results.reduce(function (res, obj) {
                            return (obj.jarak < res.jarak) ? obj : res;
                        });
                        const _obj = result;
                        //const objs = {
                        //  0: "foo",
                        //  1: "bar",
                        //};
                        //return obj;
                        //const temps = {
                        //   "lokasi": _obj.lokasi,
                        //   "jarak": _obj.jarak,
                        //    "latitude":_obj.latitude,
                        //    "longitude":_obj.longitude
                        //}
                        const aobj = {};
                        aobj['lokasi'] = _obj.lokasi;
                        aobj['jarak'] = _obj.jarak;
                        aobj['latitude'] = _obj.latitude;
                        aobj['longitude'] = _obj.longitude;

                        obj.push(aobj);
                        //obj.push(temps);

                    }

                });

                //console.log(ob);
                //localStorage.setItem("finalSPBG", JSON.stringify(obj));
                return obj;
                // Close pointsInCircle
            };
            function popup(feature, layer) {
                if (feature.properties && feature.properties.oficina) {
                    layer.bindPopup(feature.properties.oficina, {
                        closeButton: false,
                        offset: L.point(0, -20)
                    });
                    layer.on('mouseover', function () {
                        layer.openPopup();
                    });
                    layer.on('mouseout', function () {
                        layer.closePopup();
                    });
                }
            };

            $(document).ready(function () {
                $('.loading').hide();
                $("#findMap1").hide();
                $("#findMap2").hide();
                $("#findMap3").hide();
                $("#findMap4").hide();
                $("#findMap5").hide();
                $("#findMap6").hide();
                $("#findMap7").hide();
                $("#costStructure2").hide();
                $("#costStructure3").hide();
                $("#costStructure4").hide();
                $("#costStructure5").hide();
                $("#costStructure6").hide();
                $("#costStructure7").hide();
                $("#_alert1").hide();
                $("#_alert2").hide();
                $("#_alert3").hide();
                $("#_alert4").hide();
                $("#_alert5").hide();
                $("#_alert6").hide();
                $("#_alert7").hide();
                $("#_alert8").hide();
                $("#_alert9").hide();

                document.getElementById("pipeLine").checked = true;
                document.getElementById("lng").checked = true;
                document.getElementById("cng").checked = true;

                //-------------------------------------------------------------------------//

                $.ajax({
                    url: '@Url.Action("Retrieve", "MstEnergy")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {
                        var len = response.data.length;
                        for (var i = 0; i < len; i++) {
                            var id = response.data[i].energyID;
                            var name = response.data[i].energy;
                            var nilai = response.data[i].nilaiKalori;
                            var satuan = response.data[i].satuan;
                            $("#bahanBakar1").append("<option value='" + id + "'>" + name + "</option>");
                            $("#energyName1").val(name);
                        }
                        $("#bahanBakar1").val(8);
                        $("#satuanPemakaian1").text("M3/Bln");
                        $("#_satuanPemakaian1").text("M3/Bln");
                    }
                });

                $.ajax({
                    url: '@Url.Action("Retrieve", "MstEnergy")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {
                        var len = response.data.length;
                        for (var i = 0; i < len; i++) {
                            var id = response.data[i].energyID;
                            var name = response.data[i].energy;
                            var nilai = response.data[i].nilaiKalori;
                            var satuan = response.data[i].satuan;
                            $("#bahanBakar2").append("<option value='" + id + "'>" + name + "</option>");
                            $("#energyName2").val(name);
                        }
                        $("#bahanBakar2").val(8);
                        $("#satuanPemakaian2").text("M3/Bln");
                        $("#_satuanPemakaian2").text("M3/Bln");
                    }
                });

                $.ajax({
                    url: '@Url.Action("Retrieve", "MstEnergy")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {
                        var len = response.data.length;
                        for (var i = 0; i < len; i++) {
                            var id = response.data[i].energyID;
                            var name = response.data[i].energy;
                            var nilai = response.data[i].nilaiKalori;
                            var satuan = response.data[i].satuan;
                            $("#bahanBakar3").append("<option value='" + id + "'>" + name + "</option>");
                            $("#energyName3").val(name);
                        }
                        $("#bahanBakar3").val(8);
                        $("#satuanPemakaian3").text("M3/Bln");
                        $("#_satuanPemakaian3").text("M3/Bln");
                    }
                });

                $.ajax({
                    url: '@Url.Action("Retrieve", "MstEnergy")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {
                        var len = response.data.length;
                        for (var i = 0; i < len; i++) {
                            var id = response.data[i].energyID;
                            var name = response.data[i].energy;
                            var nilai = response.data[i].nilaiKalori;
                            var satuan = response.data[i].satuan;
                            $("#bahanBakar4").append("<option value='" + id + "'>" + name + "</option>");
                            $("#energyName4").val(name);
                        }
                        $("#bahanBakar4").val(8);
                        $("#satuanPemakaian4").text("M3/Bln");
                        $("#_satuanPemakaian4").text("M3/Bln");
                    }
                });

                $.ajax({
                    url: '@Url.Action("Retrieve", "MstEnergy")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {
                        var len = response.data.length;
                        for (var i = 0; i < len; i++) {
                            var id = response.data[i].energyID;
                            var name = response.data[i].energy;
                            var nilai = response.data[i].nilaiKalori;
                            var satuan = response.data[i].satuan;
                            $("#bahanBakar5").append("<option value='" + id + "'>" + name + "</option>");
                            $("#energyName5").val(name);
                        }
                        $("#bahanBakar5").val(8);
                        $("#satuanPemakaian5").text("M3/Bln");
                        $("#_satuanPemakaian5").text("M3/Bln");
                    }
                });

                $.ajax({
                    url: '@Url.Action("Retrieve", "MstEnergy")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {
                        var len = response.data.length;
                        for (var i = 0; i < len; i++) {
                            var id = response.data[i].energyID;
                            var name = response.data[i].energy;
                            var nilai = response.data[i].nilaiKalori;
                            var satuan = response.data[i].satuan;
                            $("#bahanBakar6").append("<option value='" + id + "'>" + name + "</option>");
                            $("#energyName6").val(name);
                        }
                        $("#bahanBakar6").val(8);
                        $("#satuanPemakaian6").text("M3/Bln");
                        $("#_satuanPemakaian6").text("M3/Bln");
                    }
                });

                $.ajax({
                    url: '@Url.Action("Retrieve", "MstEnergy")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {
                        var len = response.data.length;
                        for (var i = 0; i < len; i++) {
                            var id = response.data[i].energyID;
                            var name = response.data[i].energy;
                            var nilai = response.data[i].nilaiKalori;
                            var satuan = response.data[i].satuan;
                            $("#bahanBakar7").append("<option value='" + id + "'>" + name + "</option>");
                            $("#energyName7").val(name);
                        }
                        $("#bahanBakar7").val(8);
                        $("#satuanPemakaian7").text("M3/Bln");
                        $("#_satuanPemakaian7").text("M3/Bln");
                    }
                });

                $("#bahanBakar1").change(function () {
                    var deptid = $(this).val();
                    $.ajax({
                        url: '@Url.Action("Retrieve", "MstEnergy")',
                        type: 'post',
                        dataType: 'json',
                        success: function (response) {
                            var len = response.data.length;
                            for (var i = 0; i < len; i++) {
                                var id = response.data[i].energyID;
                                var energy = response.data[i].energy;
                                if (id == deptid) {
                                    $("#nilaiKalori1").val(response.data[i].nilaiKalori);
                                    $("#satuan1").text(response.data[i].satuan);
                                    $("#energyName1").val(response.data[i].energy);
                                    $("#hargaBBM1").val(response.data[i].harga);
                                    if (energy == "LPG" || energy == "Batu Bara") {
                                        $("#satuanPemakaian1").text("Kg/Bln");
                                        $("#_satuanPemakaian1").text("Kg/Bln");
                                    } else if (energy == "Gas Bumi") {
                                        $("#satuanPemakaian1").text("M3/Bln");
                                        $("#_satuanPemakaian1").text("M3/Bln");
                                    } else {
                                        $("#satuanPemakaian1").text("Ltr/Bln");
                                        $("#_satuanPemakaian1").text("Ltr/Bln");
                                    }
                                }
                            }
                        }
                    });
                });

            });

            //------------- FUNCTION ADD OR DELETE CAPEL -------///

            $('.btn-number').click(function (e) {
                e.preventDefault();

                fieldName = $(this).attr('data-field');
                type = $(this).attr('data-type');
                var input = $("input[name='" + fieldName + "']");
                var currentVal = parseInt(input.val());
                if (!isNaN(currentVal)) {
                    if (type == 'minus') {

                        if (currentVal > input.attr('min')) {
                            input.val(currentVal - 1).change();
                        }
                        if (parseInt(input.val()) == input.attr('min')) {
                            $(this).attr('disabled', true);
                        }

                    } else if (type == 'plus') {

                        if (currentVal < input.attr('max')) {
                            input.val(currentVal + 1).change();
                        }
                        if (parseInt(input.val()) == input.attr('max')) {
                            $(this).attr('disabled', true);
                        }

                        let _div = $("#costStructure").clone()[0];
                        $(_div).attr('id', 'div-capel-' + input.val());


                    }
                } else {
                    input.val(0);
                }

                appendListCapel(type, input.val())
            });
            $('.input-number').focusin(function () {
                $(this).data('oldValue', $(this).val());
            });
            $('.input-number').change(function () {

                minValue = parseInt($(this).attr('min'));
                maxValue = parseInt($(this).attr('max'));
                valueCurrent = parseInt($(this).val());

                name = $(this).attr('name');
                if (valueCurrent >= minValue) {
                    $(".btn-number[data-type='minus'][data-field='" + name + "']").removeAttr('disabled')
                } else {
                    alert('Sorry, the minimum value was reached');
                    $(this).val($(this).data('oldValue'));
                }
                if (valueCurrent <= maxValue) {
                    $(".btn-number[data-type='plus'][data-field='" + name + "']").removeAttr('disabled')
                } else {
                    alert('Sorry, the maximum value was reached');
                    $(this).val($(this).data('oldValue'));
                }


            });
            $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) ||
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                    // let it happen, don't do anything
                    return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

            //-------------- APPEND LIST CAPEL--------------//

            function appendListCapel(type, total_capel) {
                let option = `<option value="${'costStructure' + total_capel}"> ${'Pelanggan ' + total_capel} </option>`;

                if (type == 'plus') {
                    $("#list-capel").append(option);
                } else {
                    let idx = total_capel + 1;
                    let ids = total_capel - 1;
                    $("#list-capel option:gt('" + ids + "')").remove();

                    $("#list-capel option[value='" + total_capel + "']").change();

                    $("#list-capel option[value!='" + 1 + "']").each(function (idx, value) {
                        let id = $(value).val();
                        var xy = '#' + id;
                        $(xy).hide();
                    });


                    $('#costStructure1').hide();
                    $('#costStructure2').hide();
                    $('#costStructure3').hide();
                    $('#costStructure4').hide();
                    $('#costStructure5').hide();
                    $('#costStructure6').hide();
                    $('#costStructure7').hide();
                    $('#costStructure' + total_capel).show();
                }

            }

            //---------------------CAPEL CHANGE-----------------------//

            function changeCapel(elm) {
                let no_capel = $(elm).val();
                $("#list-capel option[value!='" + no_capel + "']").each(function (idx, value) {
                    let id = $(value).val();
                    $('#' + id).hide();
                });


                $('#' + no_capel).show();
                //$('#tbl-bill-' + no_bill).parents('div.dataTables_wrapper').first().show();

            }

            //---------------- MAP FUNCTION --------------------//

            function mapp1() {
                $("#costStructure1").hide();
                $("#headerCluster").hide();
                $("#btnFooter").hide();
                $("#findMap1").show();

                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                            osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib });
                        map = new L.Map('map1', {
                            minZoom: 6,
                            zoom: 9,
                            center: [-6.159907, 106.815383]
                        })

                        osm.addTo(map)
                        // This is the circle on the map that will be determine how many markers are around
                        var circle;
                        // The marker drawn onto the map
                        var drawn_marker = L.marker();
                        // Group for our markers
                        var drawn_markers = L.featureGroup();
                        map.addLayer(drawn_markers);
                        // Icons that get placed on map
                        var eco = L.icon({
                            iconSize: [32, 37],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            iconUrl: '/plugins/map/images/pertacon.png'
                        });
                        // When an icon is clicked
                        function popup(feature, layer) {
                            if (feature.properties && feature.properties.oficina) {
                                layer.bindPopup(feature.properties.oficina, {
                                    closeButton: false,
                                    offset: L.point(0, -20)
                                });
                                layer.on('mouseover', function () {
                                    layer.openPopup();
                                });
                                layer.on('mouseout', function () {
                                    layer.closePopup();
                                });
                            }
                        };
                        // Convert miles to meters to set radius of circle
                        function milesToMeters(miles) {
                            return miles * 1069.344;
                        };

                        var draw_control = new L.Control.Draw({
                            draw: {
                                polyline: false,
                                polygon: false,
                                circle: false,
                                marker: drawn_marker
                            },
                            edit: {
                                featureGroup: drawn_markers,
                                remove: true
                            }
                        });
                        map.on(L.Draw.Event.CREATED, function (event) {
                            var layer = event.layer;
                            drawn_markers.addLayer(layer);
                        });
                        map.addControl(draw_control);


                        var farmacias = L.geoJson(locationMaps, {
                            onEachFeature: popup,
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: eco });
                            }
                        }).addTo(map);
                        // This is called after the marker is drawn
                        map.on('draw:created', function (e) {
                            // Add a circle around the marker
                            var marker_lat_long = e.layer._latlng
                            $("#latitude1").val(marker_lat_long.lat);
                            $("#longitude1").val(marker_lat_long.lng);

                            // Make the marker draggable
                            e.layer.dragging.enable();
                            // If you drag the marker, make sure the circle goes with it
                            e.layer.on('dragend', function (event) {

                                $("#latitude1").val(event.target.getLatLng().lat);
                                $("#longitude1").val(event.target.getLatLng().lng);
                                map.setView(event.target.getLatLng());

                            });
                            $('.leaflet-draw-draw-marker').hide();
                        });
                        // Reset map view on marker drag
                        drawn_marker.on('dragend', function (event) {
                            map.setView(event.target.getLatLng());
                            circle.setLatLng(event.target.getLatLng());
                            // This will determine how many markers are within the circle
                            pointsInCircle(circle, milesToMeters($('#radius').val()));
                            // Redraw: Leaflet function
                            circle.redraw();
                        });
                    }

                });


            }
            function mapp2() {
                $("#costStructure2").hide();
                $("#headerCluster").hide();
                $("#btnFooter").hide();
                $("#findMap2").show();

                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                            osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib });
                        map = new L.Map('map2', {
                            minZoom: 6,
                            zoom: 9,
                            center: [-6.159907, 106.815383]
                        })

                        osm.addTo(map)
                        // This is the circle on the map that will be determine how many markers are around
                        var circle;
                        // The marker drawn onto the map
                        var drawn_marker = L.marker();
                        // Group for our markers
                        var drawn_markers = L.featureGroup();
                        map.addLayer(drawn_markers);
                        // Icons that get placed on map
                        var eco = L.icon({
                            iconSize: [32, 37],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            iconUrl: '/plugins/map/images/pertacon.png'
                        });
                        // When an icon is clicked
                        function popup(feature, layer) {
                            if (feature.properties && feature.properties.oficina) {
                                layer.bindPopup(feature.properties.oficina, {
                                    closeButton: false,
                                    offset: L.point(0, -20)
                                });
                                layer.on('mouseover', function () {
                                    layer.openPopup();
                                });
                                layer.on('mouseout', function () {
                                    layer.closePopup();
                                });
                            }
                        };
                        // Convert miles to meters to set radius of circle
                        function milesToMeters(miles) {
                            return miles * 1069.344;
                        };

                        var draw_control = new L.Control.Draw({
                            draw: {
                                polyline: false,
                                polygon: false,
                                circle: false,
                                marker: drawn_marker
                            },
                            edit: {
                                featureGroup: drawn_markers,
                                remove: true
                            }
                        });
                        map.on(L.Draw.Event.CREATED, function (event) {
                            var layer = event.layer;
                            drawn_markers.addLayer(layer);
                        });
                        map.addControl(draw_control);


                        var farmacias = L.geoJson(locationMaps, {
                            onEachFeature: popup,
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: eco });
                            }
                        }).addTo(map);
                        // This is called after the marker is drawn
                        map.on('draw:created', function (e) {
                            // Add a circle around the marker
                            var marker_lat_long = e.layer._latlng
                            $("#latitude2").val(marker_lat_long.lat);
                            $("#longitude2").val(marker_lat_long.lng);

                            // Make the marker draggable
                            e.layer.dragging.enable();
                            // If you drag the marker, make sure the circle goes with it
                            e.layer.on('dragend', function (event) {

                                $("#latitude2").val(event.target.getLatLng().lat);
                                $("#longitude2").val(event.target.getLatLng().lng);
                                map.setView(event.target.getLatLng());

                            });
                            $('.leaflet-draw-draw-marker').hide();
                        });
                        // Reset map view on marker drag
                        drawn_marker.on('dragend', function (event) {
                            map.setView(event.target.getLatLng());
                            circle.setLatLng(event.target.getLatLng());
                            // This will determine how many markers are within the circle
                            pointsInCircle(circle, milesToMeters($('#radius').val()));
                            // Redraw: Leaflet function
                            circle.redraw();
                        });
                    }

                });

            }
            function mapp3() {
                $("#costStructure3").hide();
                $("#headerCluster").hide();
                $("#btnFooter").hide();
                $("#findMap3").show();

                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                            osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib });
                        map = new L.Map('map3', {
                            minZoom: 6,
                            zoom: 9,
                            center: [-6.159907, 106.815383]
                        })

                        osm.addTo(map)
                        // This is the circle on the map that will be determine how many markers are around
                        var circle;
                        // The marker drawn onto the map
                        var drawn_marker = L.marker();
                        // Group for our markers
                        var drawn_markers = L.featureGroup();
                        map.addLayer(drawn_markers);
                        // Icons that get placed on map
                        var eco = L.icon({
                            iconSize: [32, 37],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            iconUrl: '/plugins/map/images/pertacon.png'
                        });
                        // When an icon is clicked
                        function popup(feature, layer) {
                            if (feature.properties && feature.properties.oficina) {
                                layer.bindPopup(feature.properties.oficina, {
                                    closeButton: false,
                                    offset: L.point(0, -20)
                                });
                                layer.on('mouseover', function () {
                                    layer.openPopup();
                                });
                                layer.on('mouseout', function () {
                                    layer.closePopup();
                                });
                            }
                        };
                        // Convert miles to meters to set radius of circle
                        function milesToMeters(miles) {
                            return miles * 1069.344;
                        };

                        var draw_control = new L.Control.Draw({
                            draw: {
                                polyline: false,
                                polygon: false,
                                circle: false,
                                marker: drawn_marker
                            },
                            edit: {
                                featureGroup: drawn_markers,
                                remove: true
                            }
                        });
                        map.on(L.Draw.Event.CREATED, function (event) {
                            var layer = event.layer;
                            drawn_markers.addLayer(layer);
                        });
                        map.addControl(draw_control);


                        var farmacias = L.geoJson(locationMaps, {
                            onEachFeature: popup,
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: eco });
                            }
                        }).addTo(map);
                        // This is called after the marker is drawn
                        map.on('draw:created', function (e) {
                            // Add a circle around the marker
                            var marker_lat_long = e.layer._latlng
                            $("#latitude3").val(marker_lat_long.lat);
                            $("#longitude3").val(marker_lat_long.lng);

                            // Make the marker draggable
                            e.layer.dragging.enable();
                            // If you drag the marker, make sure the circle goes with it
                            e.layer.on('dragend', function (event) {

                                $("#latitude3").val(event.target.getLatLng().lat);
                                $("#longitude3").val(event.target.getLatLng().lng);
                                map.setView(event.target.getLatLng());

                            });
                            $('.leaflet-draw-draw-marker').hide();
                        });
                        // Reset map view on marker drag
                        drawn_marker.on('dragend', function (event) {
                            map.setView(event.target.getLatLng());
                            circle.setLatLng(event.target.getLatLng());
                            // This will determine how many markers are within the circle
                            pointsInCircle(circle, milesToMeters($('#radius').val()));
                            // Redraw: Leaflet function
                            circle.redraw();
                        });
                    }

                });

            }
            function mapp4() {
                $("#costStructure4").hide();
                $("#headerCluster").hide();
                $("#btnFooter").hide();
                $("#findMap4").show();

                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                            osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib });
                        map = new L.Map('map4', {
                            minZoom: 6,
                            zoom: 9,
                            center: [-6.159907, 106.815383]
                        })

                        osm.addTo(map)
                        // This is the circle on the map that will be determine how many markers are around
                        var circle;
                        // The marker drawn onto the map
                        var drawn_marker = L.marker();
                        // Group for our markers
                        var drawn_markers = L.featureGroup();
                        map.addLayer(drawn_markers);
                        // Icons that get placed on map
                        var eco = L.icon({
                            iconSize: [32, 37],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            iconUrl: '/plugins/map/images/pertacon.png'
                        });
                        // When an icon is clicked
                        function popup(feature, layer) {
                            if (feature.properties && feature.properties.oficina) {
                                layer.bindPopup(feature.properties.oficina, {
                                    closeButton: false,
                                    offset: L.point(0, -20)
                                });
                                layer.on('mouseover', function () {
                                    layer.openPopup();
                                });
                                layer.on('mouseout', function () {
                                    layer.closePopup();
                                });
                            }
                        };
                        // Convert miles to meters to set radius of circle
                        function milesToMeters(miles) {
                            return miles * 1069.344;
                        };

                        var draw_control = new L.Control.Draw({
                            draw: {
                                polyline: false,
                                polygon: false,
                                circle: false,
                                marker: drawn_marker
                            },
                            edit: {
                                featureGroup: drawn_markers,
                                remove: true
                            }
                        });
                        map.on(L.Draw.Event.CREATED, function (event) {
                            var layer = event.layer;
                            drawn_markers.addLayer(layer);
                        });
                        map.addControl(draw_control);


                        var farmacias = L.geoJson(locationMaps, {
                            onEachFeature: popup,
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: eco });
                            }
                        }).addTo(map);
                        // This is called after the marker is drawn
                        map.on('draw:created', function (e) {
                            // Add a circle around the marker
                            var marker_lat_long = e.layer._latlng
                            $("#latitude4").val(marker_lat_long.lat);
                            $("#longitude4").val(marker_lat_long.lng);

                            // Make the marker draggable
                            e.layer.dragging.enable();
                            // If you drag the marker, make sure the circle goes with it
                            e.layer.on('dragend', function (event) {

                                $("#latitude4").val(event.target.getLatLng().lat);
                                $("#longitude4").val(event.target.getLatLng().lng);
                                map.setView(event.target.getLatLng());

                            });
                            $('.leaflet-draw-draw-marker').hide();
                        });
                        // Reset map view on marker drag
                        drawn_marker.on('dragend', function (event) {
                            map.setView(event.target.getLatLng());
                            circle.setLatLng(event.target.getLatLng());
                            // This will determine how many markers are within the circle
                            pointsInCircle(circle, milesToMeters($('#radius').val()));
                            // Redraw: Leaflet function
                            circle.redraw();
                        });
                    }

                });

            }
            function mapp5() {
                $("#costStructure5").hide();
                $("#headerCluster").hide();
                $("#btnFooter").hide();
                $("#findMap5").show();

                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                            osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib });
                        map = new L.Map('map5', {
                            minZoom: 6,
                            zoom: 9,
                            center: [-6.159907, 106.815383]
                        })

                        osm.addTo(map)
                        // This is the circle on the map that will be determine how many markers are around
                        var circle;
                        // The marker drawn onto the map
                        var drawn_marker = L.marker();
                        // Group for our markers
                        var drawn_markers = L.featureGroup();
                        map.addLayer(drawn_markers);
                        // Icons that get placed on map
                        var eco = L.icon({
                            iconSize: [32, 37],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            iconUrl: '/plugins/map/images/pertacon.png'
                        });
                        // When an icon is clicked
                        function popup(feature, layer) {
                            if (feature.properties && feature.properties.oficina) {
                                layer.bindPopup(feature.properties.oficina, {
                                    closeButton: false,
                                    offset: L.point(0, -20)
                                });
                                layer.on('mouseover', function () {
                                    layer.openPopup();
                                });
                                layer.on('mouseout', function () {
                                    layer.closePopup();
                                });
                            }
                        };
                        // Convert miles to meters to set radius of circle
                        function milesToMeters(miles) {
                            return miles * 1069.344;
                        };

                        var draw_control = new L.Control.Draw({
                            draw: {
                                polyline: false,
                                polygon: false,
                                circle: false,
                                marker: drawn_marker
                            },
                            edit: {
                                featureGroup: drawn_markers,
                                remove: true
                            }
                        });
                        map.on(L.Draw.Event.CREATED, function (event) {
                            var layer = event.layer;
                            drawn_markers.addLayer(layer);
                        });
                        map.addControl(draw_control);


                        var farmacias = L.geoJson(locationMaps, {
                            onEachFeature: popup,
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: eco });
                            }
                        }).addTo(map);
                        // This is called after the marker is drawn
                        map.on('draw:created', function (e) {
                            // Add a circle around the marker
                            var marker_lat_long = e.layer._latlng
                            $("#latitude5").val(marker_lat_long.lat);
                            $("#longitude5").val(marker_lat_long.lng);

                            // Make the marker draggable
                            e.layer.dragging.enable();
                            // If you drag the marker, make sure the circle goes with it
                            e.layer.on('dragend', function (event) {

                                $("#latitude5").val(event.target.getLatLng().lat);
                                $("#longitude5").val(event.target.getLatLng().lng);
                                map.setView(event.target.getLatLng());

                            });
                            $('.leaflet-draw-draw-marker').hide();
                        });
                        // Reset map view on marker drag
                        drawn_marker.on('dragend', function (event) {
                            map.setView(event.target.getLatLng());
                            circle.setLatLng(event.target.getLatLng());
                            // This will determine how many markers are within the circle
                            pointsInCircle(circle, milesToMeters($('#radius').val()));
                            // Redraw: Leaflet function
                            circle.redraw();
                        });
                    }

                });

            }
            function mapp6() {
                $("#costStructure6").hide();
                $("#headerCluster").hide();
                $("#btnFooter").hide();
                $("#findMap6").show();

                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                            osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib });
                        map = new L.Map('map6', {
                            minZoom: 6,
                            zoom: 9,
                            center: [-6.159907, 106.815383]
                        })

                        osm.addTo(map)
                        // This is the circle on the map that will be determine how many markers are around
                        var circle;
                        // The marker drawn onto the map
                        var drawn_marker = L.marker();
                        // Group for our markers
                        var drawn_markers = L.featureGroup();
                        map.addLayer(drawn_markers);
                        // Icons that get placed on map
                        var eco = L.icon({
                            iconSize: [32, 37],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            iconUrl: '/plugins/map/images/pertacon.png'
                        });
                        // When an icon is clicked
                        function popup(feature, layer) {
                            if (feature.properties && feature.properties.oficina) {
                                layer.bindPopup(feature.properties.oficina, {
                                    closeButton: false,
                                    offset: L.point(0, -20)
                                });
                                layer.on('mouseover', function () {
                                    layer.openPopup();
                                });
                                layer.on('mouseout', function () {
                                    layer.closePopup();
                                });
                            }
                        };
                        // Convert miles to meters to set radius of circle
                        function milesToMeters(miles) {
                            return miles * 1069.344;
                        };

                        var draw_control = new L.Control.Draw({
                            draw: {
                                polyline: false,
                                polygon: false,
                                circle: false,
                                marker: drawn_marker
                            },
                            edit: {
                                featureGroup: drawn_markers,
                                remove: true
                            }
                        });
                        map.on(L.Draw.Event.CREATED, function (event) {
                            var layer = event.layer;
                            drawn_markers.addLayer(layer);
                        });
                        map.addControl(draw_control);


                        var farmacias = L.geoJson(locationMaps, {
                            onEachFeature: popup,
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: eco });
                            }
                        }).addTo(map);
                        // This is called after the marker is drawn
                        map.on('draw:created', function (e) {
                            // Add a circle around the marker
                            var marker_lat_long = e.layer._latlng
                            $("#latitude6").val(marker_lat_long.lat);
                            $("#longitude6").val(marker_lat_long.lng);

                            // Make the marker draggable
                            e.layer.dragging.enable();
                            // If you drag the marker, make sure the circle goes with it
                            e.layer.on('dragend', function (event) {

                                $("#latitude6").val(event.target.getLatLng().lat);
                                $("#longitude6").val(event.target.getLatLng().lng);
                                map.setView(event.target.getLatLng());

                            });
                            $('.leaflet-draw-draw-marker').hide();
                        });
                        // Reset map view on marker drag
                        drawn_marker.on('dragend', function (event) {
                            map.setView(event.target.getLatLng());
                            circle.setLatLng(event.target.getLatLng());
                            // This will determine how many markers are within the circle
                            pointsInCircle(circle, milesToMeters($('#radius').val()));
                            // Redraw: Leaflet function
                            circle.redraw();
                        });
                    }

                });

            }
            function mapp7() {
                $("#costStructure7").hide();
                $("#headerCluster").hide();
                $("#btnFooter").hide();
                $("#findMap7").show();

                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstLokasiSPBG")',
                    type: 'post',
                    dataType: 'json',
                    success: function (response) {

                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaSPBG },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                            osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                            osm = L.tileLayer(osmUrl, { maxZoom: 18, attribution: osmAttrib });
                        map = new L.Map('map7', {
                            minZoom: 6,
                            zoom: 9,
                            center: [-6.159907, 106.815383]
                        })

                        osm.addTo(map)
                        // This is the circle on the map that will be determine how many markers are around
                        var circle;
                        // The marker drawn onto the map
                        var drawn_marker = L.marker();
                        // Group for our markers
                        var drawn_markers = L.featureGroup();
                        map.addLayer(drawn_markers);
                        // Icons that get placed on map
                        var eco = L.icon({
                            iconSize: [32, 37],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            iconUrl: '/plugins/map/images/pertacon.png'
                        });
                        // When an icon is clicked
                        function popup(feature, layer) {
                            if (feature.properties && feature.properties.oficina) {
                                layer.bindPopup(feature.properties.oficina, {
                                    closeButton: false,
                                    offset: L.point(0, -20)
                                });
                                layer.on('mouseover', function () {
                                    layer.openPopup();
                                });
                                layer.on('mouseout', function () {
                                    layer.closePopup();
                                });
                            }
                        };
                        // Convert miles to meters to set radius of circle
                        function milesToMeters(miles) {
                            return miles * 1069.344;
                        };

                        var draw_control = new L.Control.Draw({
                            draw: {
                                polyline: false,
                                polygon: false,
                                circle: false,
                                marker: drawn_marker
                            },
                            edit: {
                                featureGroup: drawn_markers,
                                remove: true
                            }
                        });
                        map.on(L.Draw.Event.CREATED, function (event) {
                            var layer = event.layer;
                            drawn_markers.addLayer(layer);
                        });
                        map.addControl(draw_control);


                        var farmacias = L.geoJson(locationMaps, {
                            onEachFeature: popup,
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: eco });
                            }
                        }).addTo(map);
                        // This is called after the marker is drawn
                        map.on('draw:created', function (e) {
                            // Add a circle around the marker
                            var marker_lat_long = e.layer._latlng
                            $("#latitude7").val(marker_lat_long.lat);
                            $("#longitude7").val(marker_lat_long.lng);

                            // Make the marker draggable
                            e.layer.dragging.enable();
                            // If you drag the marker, make sure the circle goes with it
                            e.layer.on('dragend', function (event) {

                                $("#latitude7").val(event.target.getLatLng().lat);
                                $("#longitude7").val(event.target.getLatLng().lng);
                                map.setView(event.target.getLatLng());

                            });
                            $('.leaflet-draw-draw-marker').hide();
                        });
                        // Reset map view on marker drag
                        drawn_marker.on('dragend', function (event) {
                            map.setView(event.target.getLatLng());
                            circle.setLatLng(event.target.getLatLng());
                            // This will determine how many markers are within the circle
                            pointsInCircle(circle, milesToMeters($('#radius').val()));
                            // Redraw: Leaflet function
                            circle.redraw();
                        });
                    }

                });

            }
            function back1() {
                $("#costStructure1").show();
                $("#convertEnergy1").hide();
                $("#calculateSimulation1").hide();
                $("#findMap1").hide();
                $("#headerCluster").show();
                $("#btnFooter").show();
            }
            function back2() {
                $("#costStructure2").show();
                $("#convertEnergy2").hide();
                $("#calculateSimulation2").hide();
                $("#findMap2").hide();
                $("#headerCluster").show();
                $("#btnFooter").show();
            }
            function back3() {
                $("#costStructure3").show();
                $("#convertEnergy3").hide();
                $("#calculateSimulation3").hide();
                $("#findMap3").hide();
                $("#headerCluster").show();
                $("#btnFooter").show();
            }
            function back4() {
                $("#costStructure4").show();
                $("#convertEnergy4").hide();
                $("#calculateSimulation4").hide();
                $("#findMap4").hide();
                $("#headerCluster").show();
                $("#btnFooter").show();
            }
            function back5() {
                $("#costStructure5").show();
                $("#convertEnergy5").hide();
                $("#calculateSimulation5").hide();
                $("#findMap5").hide();
                $("#headerCluster").show();
                $("#btnFooter").show();
            }
            function back6() {
                $("#costStructure6").show();
                $("#convertEnergy6").hide();
                $("#calculateSimulation6").hide();
                $("#findMap6").hide();
                $("#headerCluster").show();
                $("#btnFooter").show();
            }
            function back7() {
                $("#costStructure7").show();
                $("#convertEnergy7").hide();
                $("#calculateSimulation7").hide();
                $("#findMap7").hide();
                $("#headerCluster").show();
                $("#btnFooter").show();
            }

            //------------------------------- CALCULATE CLUSTER -------------------------------//
           
            function calculateCluster() {
                $('.loading').show();
                results = [];
                var countCapel = $('.input-number').val();

                var _data = [];
                for (x = 1; x <= countCapel; x++) {
                    var projectName = $("#projectName" + x).val();
                    var creator = $("#creator" + x).val();
                    var projectDate = $("#projectDate" + x).val();
                    var customerName = $("#customerName" + x).val();
                    var demandUsage = $("#demandUsage" + x).val();
                    var pressure = $("#pressure" + x).val();
                    var targetCOD = $("#targetCOD" + x).val();
                    var nilaiKalori = $("#nilaiKalori" + x).val();
                    var hourDay = $("#hourDay" + x).val();
                    var workDay = $("#workDay" + x).val();
                    var lat = $("#latitude" + x).val();
                    var long = $("#longitude" + x).val();
                    var energyName = $("#energyName" + x).val();
                    if (targetCOD == "" || targetCOD == null || targetCOD == undefined) {
                        targetCOD = "0001-01-01";
                    }

                    let temp = {
                        "projectName": projectName,
                        "creator": creator,
                        "projectDate": projectDate,
                        "customerName": customerName,
                        "energyName": energyName,
                        "demandUsage": parseFloat(demandUsage),
                        "pressure": parseFloat(pressure),
                        "nilaiKalori": parseFloat(nilaiKalori),
                        "targetCOD": targetCOD,
                        "hourDay": hourDay,
                        "workDay": workDay,
                        "lat": lat,
                        "long": long
                    }
                    _data.push(temp);
                }

               let result = true;

                for (let i=0; i<_data.length; i++){
                    let projectName = _data[i].projectName;
                    let projectDate = _data[i].projectDate;
                    let customerName = _data[i].customerName;
                    let energyName = _data[i].energyName;
                    let demandUsage = _data[i].demandUsage;
                    let pressure = _data[i].pressure;
                    let nilaiKalori = _data[i].nilaiKalori;
                    let targetCOD = _data[i].targetCOD;
                    let hourDay = _data[i].hourDay;
                    let workDay = _data[i].workDay;
                    let lat = _data[i].lat;
                    let long = _data[i].long;
                    var capel = i + 1;
                    if (projectName == '' || projectName == null){
                            $("#_alert1").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert1").slideUp(500);
                            });
                            $("#textError1").text('Pelanggan ' + capel + ': Project Name ');
                    }
                    else if (projectDate == '' || projectDate == null){
                            $("#_alert2").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert2").slideUp(500);
                            });
                            $("#textError2").text('Pelanggan ' + capel + ': Project Date ');
                    }
                    else if (customerName == '' || customerName == null){
                            $("#_alert3").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert3").slideUp(500);
                            });
                            $("#textError3").text('Pelanggan ' + capel + ': Customer Name ');
                    }
                    else if (demandUsage == '' || demandUsage == null){
                            $("#_alert4").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert4").slideUp(500);
                            });
                            $("#textError4").text('Pelanggan ' + capel + ': Demand Usage ');
                    }
                    else if (pressure == '' || pressure == null){
                            $("#_alert5").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert5").slideUp(500);
                            });
                            $("#textError5").text('Pelanggan ' + capel + ': Pressure ');
                    }
                    else if (hourDay == '' || hourDay == null){
                            $("#_alert6").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert6").slideUp(500);
                            });
                            $("#textError6").text('Pelanggan ' + capel + ': Hour Day ');
                    }
                    else if (workDay == '' || workDay == null){
                            $("#_alert7").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert7").slideUp(500);
                            });
                            $("#textError7").text('Pelanggan ' + capel + ': Work Day ');
                    }
                    else if (lat == '' || lat == null){
                            $("#_alert8").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert8").slideUp(500);
                            });
                            $("#textError8").text('Pelanggan ' + capel + ': Latitude ');
                    }
                    else if (long == '' || long == null){
                            $("#_alert9").fadeTo(2000, 500).slideUp(500, function () {
                            $("#_alert9").slideUp(500);
                            });
                            $("#textError9").text('Pelanggan ' + capel + ': Longitude ');
                    }

                    
                }
               
                function checkArray(array){
                  return array.every(item => 
                    !Object.values(item).some(value => value === "")
                  );
                }
                if (checkArray(_data) == true) {
                    var totalVolume = _data.reduce((accum, item) => accum + item.demandUsage, 0)

                var rawPoints = []
                for (i = 0; i < _data.length; i++) {

                    var lat = parseFloat(_data[i].lat);
                    var long = parseFloat(_data[i].long);
                    var demand = parseFloat(_data[i].demandUsage);
                    var hD = parseFloat(_data[i].hourDay);
                    var wD = parseFloat(_data[i].workDay);

                    let temp = {
                        "latitude": lat,
                        "longitude": long,
                        "demand": demand,
                        "opHari": hD,
                        "opBulan": wD
                    }

                    rawPoints.push(temp);

                }

                let lats = rawPoints.map(c => c.latitude).reduce((previous, current) => current += previous, 0.0);
                let longs = rawPoints.map(c => c.longitude).reduce((previous, current) => current += previous, 0.0);
                let demands = rawPoints.map(c => c.demand).reduce((previous, current) => current += previous, 0.0);
                let operasiHaris = rawPoints.map(c => c.opHari).reduce((previous, current) => current += previous, 0.0);
                let operasiBulans = rawPoints.map(c => c.opBulan).reduce((previous, current) => current += previous, 0.0);

                const position = [lats / rawPoints.length, longs / rawPoints.length];
                spbgFinal = [];
                const configurations = pointMap(lats / rawPoints.length, longs / rawPoints.length);

                var latEnd = configurations[0].latitude;
                var longEnd = configurations[0].longitude;
                var lokasiEnd = configurations[0].lokasi;

                var today = new Date();
                var date = today.getFullYear() + (today.getMonth() + 1) + today.getDate();
                var time = today.getHours() + today.getMinutes() + today.getSeconds();

                var clusterName = 'CL' + date + time + '-' + countCapel;

                var _latitude = lats / rawPoints.length;
                var _longitude = longs / rawPoints.length;
                

                $.ajax({
                    url: '@Url.Action("SaveDataHeaderCluster", "SimulationCost")',
                    type: 'POST',
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(
                        {
                            "ClusterName": clusterName,
                            "CountCapel": countCapel,
                            "TotalVolume": totalVolume
                        }
                    ),
                    success: function (datas) {
                        if (datas.status == true) {                        

                            for (i = 0; i < _data.length; i++) {

                                var projectName = _data[i].projectName;
                                var creator = _data[i].creator;
                                var projectDate = _data[i].projectDate;
                                var customerName = _data[i].customerName;
                                var _energyName = _data[i].energyName;
                                var demandUsage = parseFloat(_data[i].demandUsage);
                                var targetCOD = _data[i].targetCOD;
                                var hourDay = parseFloat(_data[i].hourDay);
                                var workDay = parseFloat(_data[i].workDay);
                                var pressure = parseFloat(_data[i].pressure);
                                var _nilaiKalori = parseFloat(_data[i].nilaiKalori);
                                var lat = _data[i].lat;
                                var long = _data[i].long;
                                var jarak = parseFloat(_data[i].jarak);

                                let latlng1 = L.latLng(lat, long);
                                let latlng2 = L.latLng(latEnd, longEnd);

                                let distance = latlng1.distanceTo(latlng2) / 1000;

                                $.ajax({
                                    url: '@Url.Action("SaveDataCluster", "SimulationCost")',
                                    type: 'POST',
                                    dataType: 'json',
                                    contentType: "application/json; charset=utf-8",
                                    data: JSON.stringify(
                                        {
                                            "HeaderClusterID": datas.data,
                                            "ProjectName": projectName,
                                            "Creator": creator,
                                            "ProjectDate": projectDate,
                                            "CustomerName": customerName,
                                            "Volume": demandUsage,
                                            "TargetCOD": targetCOD,
                                            "OperasiHari": hourDay,
                                            "OperasiBulan": workDay,
                                            "EnergyName": energyName,
                                            "Latitude": lat,
                                            "Longitude": long,
                                            "Jarak": distance,
                                            "Latitude2": latEnd,
                                            "Longitude2": longEnd,
                                            "AsalStation": lokasiEnd,
                                            "LokasiCapel": "unnamed",
                                            "TotalVolume": totalVolume,
                                            "CountCapel": countCapel
                                        }
                                    ),
                                    success: function (_data) {
                                        console.log('sukses');
                                        },

                                    error: function (jqXHR) {
                                        $('#divErrorText').text(jqXHR.responseText);
                                        $('#divError').show('fade');
                                        console.log("error header");
                                    }
                                });

                                if (document.getElementById("pipeLine").checked == true) {
                                calculatePipe(datas.data, demandUsage, _energyName, _nilaiKalori, hourDay, workDay, pressure, customerName, lat, long);
                                }

                                if (document.getElementById("pipeLine").checked == true) {

                                }
                            }

                            if (document.getElementById("pipeLine").checked == true) {
                            calculatePipeSektor(datas.data, demands, operasiHaris, operasiBulans, clusterName, _latitude, _longitude, countCapel);
                            }

                            if (document.getElementById("lng").checked == true) {
                            calculatePipeSektor(datas.data, demands, operasiHaris, operasiBulans, clusterName, _latitude, _longitude, countCapel);
                            }

                            var url = '@Url.Action("ResultCluster", "SimulationCost")?Id=' + datas.data;
                            window.location.href = url;
                                
                            
                            //const wait = Math.round(Math.random()*12000);
                            //setTimeout(function() {

                            //    var url = '@Url.Action("ResultCluster", "SimulationCost")?Id=' + datas.data;
                            //    window.location.href = url;

                            //},wait)
                                                               
                            

                        }
                    },
                    error: function (jqXHR) {
                        $('#divErrorText').text(jqXHR.responseText);
                        $('#divError').show('fade');
                        console.log("error header");
                    }
                });
                };  
            }

            function calculatePipeSektor(dataID, _demandUsage, operasiHaris, operasiBulans, _customerName, _latitude, _longitude, countCapel) {
                
                var _energy = "";

                var xyz = _demandUsage + (_demandUsage * 0.3);
                var _demand = (xyz / 30 / 24);
                    var mmscfd = 0.00085;
                    var _flowrate = (_demand * mmscfd).toFixed(2);

                    if (_flowrate <= 1) {
                        _energy = String(_flowrate).replaceAll('.', ',');
                    } else {
                        _energy = parseFloat(_flowrate);
                    }

                var _data = {
                    "Customer": {
                        "name": _customerName,
                        "type": "Industri",
                        "location": {
                            "latitude": _latitude,
                            "longitude": _longitude,
                            "postal_code": "14210",
                        }
                        ,
                    },
                    "flow_rate": {
                        //"value": $("#flowrate").val(),
                        "value": _energy,
                        "unit": "mmscfd"
                    },
                    "pressure": {
                        "value": 4,
                        "unit": "barg"
                    }
                };
                var _datas = JSON.stringify(_data);

                var users = "nimo.siapgasin";
                var passwords = "nimo.pgn645In";
                var _hourDays = operasiHaris / countCapel;             
                var _workDays = operasiBulans / countCapel;   
                
                $.ajax({
                            url: '@Url.Action("getPipeSektor", "SimulationCost")?datas=' + _datas + '&user=' + users + '&password=' + passwords + '&dataID=' + dataID + '&volume2=' + _demandUsage + '&operasiHari=' + _hourDays + '&operasiBulan=' + _workDays + '&energyName=' + 'Gas Bumi' + '&pressure=' + 4  + '&customer=' + _customerName  + '&countCapel=' + countCapel  ,//File Collection Endpoint

                            type: 'get',
                            dataType: 'json',
                            contentType: "application/json; charset=utf-8",
                            data: "{}",
                            success: function (datas) {
                                console.log("success pipe");                               
                            },
                            
                            error: function (datas) {
                                
                                console.log("error pipe");
                            }
                        });


               
            }


            function calculatePipe(dataID, _demandUsage, _energyName, _nilaiKalori, _hourDay, _workDay, _pressure, _customerName, _latitude, _longitude) {
                
                var users = "nimo.siapgasin";
                var passwords = "nimo.pgn645In";
                var demandUsage = _demandUsage;
                var energyName = _energyName;
                var nilaiKalori = _nilaiKalori;
                var operasiHari = _hourDay;
                var operasiBulan = _workDay;   
                var pressure = _pressure;
                var pressureX = "";
                var gas = 8945.14;
                var energyX = "";

                    if (pressure <= 1) {
                        pressureX = String(pressure).replaceAll('.', ',');
                    } else {
                        pressureX = parseFloat(pressure);
                    }

                if (energyName == "Gas Bumi") {
                    var _demand = (demandUsage / 30 / 24);
                    var mmscfd = 0.00085;
                    var _flowrate = (_demand * mmscfd).toFixed(3);

                    if (_flowrate <= 1) {
                        energyX = String(_flowrate).replaceAll('.', ',');
                    } else {
                        energyX = parseFloat(_flowrate);
                    }

                } else {
                    var _demand = (nilaiKalori / gas) * demandUsage;
                    var _demands = (_demand / 30 / 24);
                    var mmscfd = 0.00085;
                    var _flowrate = (_demands * mmscfd).toFixed(3);
                    if (_flowrate <= 1) {
                        energyX = String(_flowrate).replaceAll('.', ',');
                    } else {
                        energyX = parseFloat(_flowrate);
                    }
                } 
                

                var _data = {
                    "Customer": {
                        "name": _customerName,
                        "type": "Industri",
                        "location": {
                            "latitude": _latitude,
                            "longitude": _longitude,
                            "postal_code": "14210",
                        }
                        ,
                    },
                    "flow_rate": {
                        //"value": $("#flowrate").val(),
                        "value": energyX,
                        "unit": "mmscfd"
                    },
                    "pressure": {
                        "value": pressureX,
                        "unit": "barg"
                    }
                };
                var _datas = JSON.stringify(_data);

                //var token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6Im5pbW8uc2lhcGdhc2luIiwibmJmIjoxNjYxODIxNTU1LCJleHAiOjE2NjE5MDc5NTQsImlhdCI6MTY2MTgyMTU1NX0.iEM6hCBcYl7bObc8qfmr0nQC5WOOB2GFdYZ_2t0G4jw";
                $.ajax({
                            url: '@Url.Action("getPipeCalculatorCluster", "SimulationCost")?datas=' + _datas + '&user=' + users + '&password=' + passwords + '&dataID=' + dataID + '&volume2=' + demandUsage + '&operasiHari=' + operasiHari + '&operasiBulan=' + operasiBulan + '&energyName=' + energyName + '&pressure=' + pressure  + '&customer=' + _customerName  ,//File Collection Endpoint

                            type: 'get',
                            dataType: 'json',
                            contentType: "application/json; charset=utf-8",
                            data: "{}",
                            success: function (datas) {
                                console.log("success pipe");
                                 
                                 
                            //    $.ajax({
                            //    url: '@Url.Action("SaveDataPipe", "SimulationCost")',
                            //    type: 'POST',
                            //    dataType: 'json',
                            //    contentType: "application/json; charset=utf-8",
                            //    data: JSON.stringify(
                            //        {
                            //           "HeaderSimulationID" : dataID,
	                           //         "type" : datas.data.type,
	                           //         "latitude" : datas.data.location.latitude,
	                           //         "longitude" : datas.data.location.longitude,
	                           //         "postal_code" : datas.data.location.postal_code,
	                           //         "distanceValue" : datas.data.distance.value,
	                           //         "distanceUnit" : datas.data.distance.nit,
	                           //         "pressureValue" : datas.data.pressure.value,
	                           //         "pressureUnit" : datas.data.pressure.unit,
	                           //         "volumeValue" : datas.data.volume.value,
	                           //         "volumeUnit" : datas.data.volume.unit,
                            //            "diameterValue" : datas.data.diameter.value,
	                           //         "diameterUnit" : datas.data.diameter.unit,
	                           //         "route" : datas.data.route,
                            //        }
                            //    ),
                            //    success: function (data) {
                            //        console.log("great");                                    
                            //    },        
                                
                            //    error: function (jqXHR) {
                            //        $('#divErrorText').text(jqXHR.responseText);
                            //        $('#divError').show('fade');
                            //    }
                            //});

                            },
                            
                            error: function (datas) {
                                success(dataID);
                                console.log("error pipe");
                            }
                        });
               
            }

            function calculateLNG(dataID) {

                console.log("startlng header");
                if (document.getElementById("lng").checked == true) {
                var projectName = $("#projectName").val();
                var creator = $("#creator").val();
                var projectDate = $("#projectDate").val();
                var customerName = $("#customerName").val();
                var demandUsage = $("#demandUsage").val();
                var targetCOD = $("#targetCOD").val();
                var hourDay = $("#hourDay").val();
                var workDay = $("#workDay").val();
                var lat = $("#latitude").val();
                var long = $("#longitude").val();

                var totalCustomer = $("#totalCustomer").val();
                var size = $("#Size").val();
                var volumes = $("#volumes").val();
                var speeds = $("#speed").val();
                var qtyTruck = $("#qtyTruck").val();
                
                var ids = $("#dataID").val();

                pointMapLNG(lat, long);

                if (resultsLNG.length > 0) {
                    var rsLokasi = resultsLNG[0].lokasi;
                    var rsJarak = resultsLNG[0].jarak;
                    var rsLatitude = resultsLNG[0].latitude;
                    var rsLongitude = resultsLNG[0].longitude;

                    var demands = (demandUsage / 22.50 / 1000).toFixed(2);
                    //var demands = existDemand ;
                    $("#demandBBTUD").val(demands);
                    var distance = resultsLNG[0].jarak;
                    var hub = 0;
                    var plg = totalCustomer;
                    var isoTank = size;
                    var volume = volumes;
                    var speed = speeds;
                    var trk = qtytruck;

                    var filling = 0.5;
                    var trucking = (distance / speed).toFixed(3);
                    var bongkar = 0.5;
                    var totalVoyage = parseFloat(filling) + parseFloat(trucking) + parseFloat(bongkar);
                    var totalRoundVoyage = (totalVoyage * 2).toFixed(3);
                    var roundTotal = Math.ceil(totalRoundVoyage);
                      $("#_roundTotal").val(roundTotal);

                    var mmbtu = 22.50;
                    var m3day = ((demands * 1000) / mmbtu).toFixed(2);
                    $("#_m3day").val(m3day);
                   
                    var isotankday = (m3day / volume).toFixed(2);
                    $("#_isotankday").val(isotankday);
                    var qtytruck = 2;
                    var roundvoyagedays = (roundTotal / qtytruck).toFixed(0);
                    var safetymargindays = 0;


                    var tblDemand = (((demands * 1000) / mmbtu) / volume).toFixed(3);
                    var tblDrop = (isotankday * roundvoyagedays).toFixed(0);

                    var tblRemain1 = (parseFloat((isotankday * roundvoyagedays).toFixed(0)) - parseFloat(tblDemand)).toFixed(2);
                    var c1 = parseFloat(Math.ceil(tblRemain1));
                    var c2 = Math.floor((((demands * 1000) / mmbtu) / volume));
                    var c3 = parseFloat(c1) + parseFloat(c2);

                    var filStas = (isotankday * roundvoyagedays).toFixed(0);
                    var empt1 = (((demands * 1000) / mmbtu) / volume).toFixed(2);
                    var empt2 = Math.floor((((demands * 1000) / mmbtu) / volume));

                    var totISO = parseFloat(filStas) + parseFloat(c3) + parseFloat(0);


                    for (x = 1; x < 366; x++) {
                        ads(x);
                    }

                    update_amounts();


                    $("#demand_").val(tblDemand);
                    $("#drop_").val(tblDrop);

                    if (tblDrop == 0) {
                        $("#voyage_").val("-");
                    } else {
                        $("#voyage_").val("Voyage");
                    }

                    $("#remaining1_").val(tblRemain1);
                    $("#remaining2_").val(Math.ceil(tblRemain1));
                    $("#empty1_").val((((demands * 1000) / mmbtu) / volume).toFixed(2));
                    $("#empty2_").val(Math.floor((((demands * 1000) / mmbtu) / volume)));
                    $("#fillingStation_").val((isotankday * roundvoyagedays).toFixed(0));

                    $("#regasPlan_").val(c3);
                    $("#onTheRoad_").val(0);
                    $("#load_").val(0);
                    $("#totalIso_").val(totISO);


                    function update_amounts() {
                        var sum = 0.0;
                        var maxFillingStation = [];
                        var maxRegasPlant = [];
                        var maxOnTheRoad = [];
                        var maxTotalIso = [];
                        var maxDrop = [];
                        var count = $('#table tr').length;
                        $('.product').each(function () {

                            var price = $(this).find('.price').val();
                            var amount = (price * 1)
                            sum += amount;


                            var fillingStation = $(this).find('.fillingStation').val();
                            var regasPlan = $(this).find('.regasPlan').val();
                            var onTheRoad = $(this).find('.onTheRoad').val();
                            var totalIso = $(this).find('.totalIso').val();
                            var drop = $(this).find('.drop').val();
                            maxFillingStation.push(fillingStation);
                            maxRegasPlant.push(regasPlan);
                            maxOnTheRoad.push(onTheRoad);
                            maxTotalIso.push(totalIso);
                            maxDrop.push(drop);
                            //console.log(sum)
                            gtotal = sum + count;
                            $(this).find('.amount').val(amount);
                        });
                        $('.total').val((sum).toFixed(2));

                        var maxFillingStation = Math.max.apply(null, maxFillingStation);
                        var maxRegasPlant = Math.max.apply(null, maxRegasPlant);
                        var maxOnTheRoad = Math.max.apply(null, maxOnTheRoad);
                        var maxTotalIso = Math.max.apply(null, maxTotalIso);
                        var maxDrops = Math.max.apply(null, maxDrop);

                        const resultDrop = maxDrop.filter(i => i === "0").length;

                        $('._fillingStation').val((maxFillingStation));
                        $('._regasPlan').val((maxRegasPlant));
                        $('._onTheRoad').val((maxOnTheRoad));
                        $('._totalIso').val((maxTotalIso));
                        $('.totalCall').val(365 - resultDrop);
                        $('.totalCalls').val((365 - resultDrop) / qtytruck);
                    }

                    function ads(id) {
                        var clone = $("#table tbody tr:last").clone();
                        clone.addClass('newTR');
                        clone.find('td.remTD input').removeClass('hidden');
                        $("#table tbody").append(clone);

                        var _id = x - 1;

                        if (_id == 0) {
                            var _no = document.getElementsByName('noo[]');
                            var a00 = _no[x - 1];
                            a00.value = x;

                            var _demand = document.getElementsByName('demand[]');
                            var a1 = _demand[x - 1];
                            a1.value = tblDemand;

                            var _drop = document.getElementsByName('drop[]');
                            var a2 = _drop[x - 1];
                            a2.value = tblDrop;

                            if (tblDrop == 0) {
                                var _voyage = document.getElementsByName('voyage[]');
                                var a3 = _voyage[x - 1];
                                a3.value = "-";
                            } else {
                                var _voyage = document.getElementsByName('voyage[]');
                                var a3 = _voyage[x - 1];
                                a3.value = "Voyage";
                            }

                            var _remaining1 = document.getElementsByName('remaining1[]');
                            var a4 = _remaining1[x - 1];
                            a4.value = tblRemain1;

                            var _remaining2 = document.getElementsByName('remaining2[]');
                            var a5 = _remaining2[x - 1];
                            a5.value = Math.ceil(tblRemain1);

                            var _empty1 = document.getElementsByName('empty1[]');
                            var a6 = _empty1[x - 1];
                            a6.value = empt1;

                            var _empty2 = document.getElementsByName('empty2[]');
                            var a7 = _empty2[x - 1];
                            a7.value = empt2;

                            var _fillingStation = document.getElementsByName('fillingStation[]');
                            var a8 = _fillingStation[x - 1];
                            a8.value = filStas;

                            var _regasPlan = document.getElementsByName('regasPlan[]');
                            var a9 = _regasPlan[x - 1];
                            a9.value = c3;

                            var _onTheRoad = document.getElementsByName('onTheRoad[]');
                            var a10 = _onTheRoad[x - 1];
                            a10.value = 0;

                            var _totalIso = document.getElementsByName('totalIso[]');
                            var a11 = _totalIso[x - 1];
                            a11.value = totISO;

                            var _load = document.getElementsByName('load[]');
                            var a12 = _load[x - 1];
                            a12.value = 0;

                        } else {
                            var _no = document.getElementsByName('noo[]');
                            var a00 = _no[x - 1];
                            a00.value = x;

                            var _demand = document.getElementsByName('demand[]');
                            var a1 = _demand[x - 1];
                            a1.value = tblDemand;

                            // Drop
                            var _remaining1 = document.getElementsByName('remaining1[]');

                            var arr = x - 2;
                            var remainB = _remaining1[arr];

                            var dropValue = remainB.value - tblDemand;

                            var drops = 0;
                            if (dropValue < isotankday) {
                                var cal = ((isotankday * roundvoyagedays) + (isotankday * safetymargindays));
                                drops = Math.ceil(cal);
                            } else {
                                drops = 0;
                            }

                            var _drop = document.getElementsByName('drop[]');
                            var a2 = _drop[x - 1];
                            a2.value = drops;

                            // Voyage
                            if (drops == 0) {
                                var _voyage = document.getElementsByName('voyage[]');
                                var a3 = _voyage[x - 1];
                                a3.value = "-";
                            } else {
                                var _voyage = document.getElementsByName('voyage[]');
                                var a3 = _voyage[x - 1];
                                a3.value = "Voyage";
                            }

                            // Load
                            var loadB = document.getElementsByName('empty2[]');
                            var arrs = x - 2;
                            var _emp2 = loadB[arrs].value;
                            var empss = 0;

                            if (drops == 0) {
                                var _load = document.getElementsByName('load[]');
                                var a4 = _load[x - 1];
                                a4.value = 0;
                                empss = 0;
                            } else {
                                var _load = document.getElementsByName('load[]');
                                var a4 = _load[x - 1];
                                a4.value = _emp2;
                                empss = _emp2;
                            }

                            var in_ = parseFloat(remainB.value) + parseFloat(drops) - parseFloat(tblDemand);
                            // Remaining 1
                            var rem = (in_).toFixed(2);
                            var _remain1 = document.getElementsByName('remaining1[]');
                            var a5 = _remain1[x - 1];
                            a5.value = rem;

                            // Remaining 2
                            var rems = Math.ceil(in_);
                            var _remain2 = document.getElementsByName('remaining2[]');
                            var a6 = _remain2[x - 1];
                            a6.value = rems;

                            // Empty 1
                            var empB = document.getElementsByName('empty1[]');
                            var _arr = x - 2;
                            var _emp1s = empB[_arr].value;

                            var inEmp_ = (parseFloat(_emp1s) + parseFloat(tblDemand) - parseFloat(empss)).toFixed(2);
                            var _empty1 = document.getElementsByName('empty1[]');
                            var a7 = _empty1[x - 1];
                            a7.value = inEmp_;

                            // Empty 2
                            var _emp2 = Math.floor(inEmp_);
                            var _empty2 = document.getElementsByName('empty2[]');
                            var a8 = _empty2[x - 1];
                            a8.value = _emp2;

                            // Filling Station
                            var _filSts = document.getElementsByName('fillingStation[]');
                            var a9 = _filSts[x - 1];
                            a9.value = filStas;

                            //Regas Plant
                            var numP = parseFloat(rems) + parseFloat(_emp2);
                            var _regP = document.getElementsByName('regasPlan[]');
                            var a10 = _regP[x - 1];
                            a10.value = numP;

                            //On The Road
                            var otrB = document.getElementsByName('onTheRoad[]');
                            var _arr_ = x - 2;
                            var _otrB = otrB[_arr_].value;
                            var otrr = 0;
                            if (empss == 0) {
                                otrr = _otrB;
                            } else {
                                otrr = empss;
                            }
                            var _otr = document.getElementsByName('onTheRoad[]');
                            var a11 = _otr[x - 1];
                            a11.value = otrr;

                            //Total Iso
                            var totSo = parseFloat(filStas) + parseFloat(numP) + parseFloat(otrr);
                            var _iso = document.getElementsByName('totalIso[]');
                            var a12 = _iso[x - 1];
                            a12.value = totSo;
                        }



                    }

                    var demandBBTUD = $("#demandBBTUD").val();
                    var totalCustomer = $("#totalCustomer").val();
                    var size = $("#Size").val();
                    var volumes = $("#volumes").val();
                    var speeds = $("#speed").val();
                    var qtyTruck = $("#qtyTruck").val();

                    var trk = $("#qtyTruckInput").val();
                    var _m3day = $("#_m3day").val();
                    var _roundTotal = $("#_roundTotal").val();
                    var _isotankday = $("#_isotankday").val();
                    var _maxTotalIso = $("#_maxTotalIso").val();
                    var _totalIso = $("#_totalIso").val();


                    var vgl = totalCustomer * 2;

                    $.ajax({
                        url: '@Url.Action("SaveDataRetailSupply", "SimulationCost")?headerSimulationID=' + ids + '&demand=' + demandBBTUD + '&jarakSumber=' + distance + '&jarakHub=' + hub + '&jumlahPelanggan=' + totalCustomer + '&size=' + size + '&volume=' + volumes + '&speed=' + speeds + '&qtyTruck=' + qtytruck + '&estRoundTrip=' + _roundTotal + '&m3Day=' + _m3day + '&isoTankDay=' + _isotankday + '&qtyVGL=' + vgl + '&isoTank=' + _totalIso + '&asalSumber=' + rsLokasi + '&latitude=' + rsLatitude + '&longitude=' + rsLongitude + '&latitudePelanggan=' + lat + '&longitudePelanggan=' + long,
                        type: 'post',
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        data: "{}",

                        success: function (datas) {
                            console.log("success lng"); 
                        },

                        error: function (jqXHR) {
                            $('#divErrorText').text(jqXHR.responseText);
                            $('#divError').show('fade');
                            console.log("error cng");
                        }
                    });

                } else {
                    var currentRadius = $("#radiusLNG").val();
                    var upRadius = parseInt(currentRadius) + 50;
                    $("#radiusLNG").val(upRadius);
                    calculateLNG();
                }
                                           
                            success(ids);
                } 
                else {
                    success(ids);
                }
            }
            //------------------------------- POINT MAP -------------------------------//

            function functionPipe() {
                var checkBox = document.getElementById("pipeLine");

                if (checkBox.checked == true) {
                    $( "#pipeLine").prop('checked', true);

                } else {
                    $( "#pipeLine").prop('checked', false);

                }
            }

            function functionLNG() {
                var checkBox = document.getElementById("lng");

                if (checkBox.checked == true) {
                    $("#lngRow1").show();
                    $("#lngRow2").show();
                    $("#lngRow3").show();
                    $("#lngRow4").show();
                    $("#lngRow5").show();
                    $("#lngRow6").show();
                    $("#lngRow7").show();
                } else {
                    $("#lngRow1").hide();
                    $("#lngRow2").hide();
                    $("#lngRow3").hide();
                    $("#lngRow4").hide();
                    $("#lngRow5").hide();
                    $("#lngRow6").hide();
                    $("#lngRow7").hide();
                }
            }

            function pointMapLNG(lat, long) {
                var titik = L.latLng(lat, long);
                L.marker(titik).addTo(map);

                var circle;
                var radius = milesToMeters($("#radiusLNG").val());
                circle = L.circle(titik, radius);
                circle.addTo(map);

                pointsInCircleLNG(circle, radius);
            }

            function pointsInCircleLNG(circle, meters_user_set) {
                obj = [];
                var locationMaps = {};
                locationMaps["features"] = [];
                $.ajax({
                    url: '@Url.Action("Retrieve", "MstHubLNG")',
                    type: 'post',
                    dataType: 'json',
                    async: false,
                    success: function (response) {
                        var len = response.data.length;

                        for (var i = 0; i < len; i++) {

                            let temp = {
                                "type": "Feature",
                                "properties": { "oficina": response.data[i].namaHub },
                                "geometry": { "type": "Point", "coordinates": [response.data[i].longitude, response.data[i].latitude] }
                            }
                            locationMaps.features.push(temp);
                        }
                        //console.log(locationMaps);
                        let mapping = [];
                        for (var i = 0; i < locationMaps.features.length; i++) {
                            var long = locationMaps.features[i].geometry.coordinates[0];
                            var lat = locationMaps.features[i].geometry.coordinates[1];
                            var loc = locationMaps.features[i].properties.oficina;
                            let temp = {
                                "loc": loc,
                                "lat": lat,
                                "long": long
                            }
                            mapping.push(temp);
                        }

                        if (circle !== undefined) {
                            // Only run if we have an address entered
                            // Lat, long of circle
                            circle_lat_long = circle.getLatLng();
                            var counter_points_in_circle = 0;
                            // Loop through each point in JSON file
                            for (var i = 0; i < mapping.length; i++) {
                                // Lat, long of current point
                                let latA = mapping[i].coord;
                                var latlng = L.latLng(mapping[i].lat, mapping[i].long);
                                layer_lat_long = latA;

                                // Distance from our circle marker
                                // To current point in meters
                                distance_from_layer_circle = latlng.distanceTo(circle_lat_long);
                                //calculateDistance(latlng, latB)
                                // See if meters is within raduis
                                // The user has selected
                                if (distance_from_layer_circle <= meters_user_set) {
                                    counter_points_in_circle += 1;
                                    let temp = {
                                        "lokasi": mapping[i].loc,
                                        //"jarak": (distance_from_layer_circle / 1000).toFixed(2),
                                        "jarak": parseFloat((distance_from_layer_circle / 1000).toFixed(2)),
                                        "latitude": mapping[i].lat,
                                        "longitude": mapping[i].long,
                                    }
                                    resultsLNG.push(temp);
                                }

                            };
                            //farmacias.eachLayer(function (layer) {

                            //});
                            // Set number of results on main page


                        }

                        var result = resultsLNG.reduce(function (res, obj) {
                            return (obj.jarak < res.jarak) ? obj : res;
                        });
                        const _obj = result;
                        //const objs = {
                        //  0: "foo",
                        //  1: "bar",
                        //};
                        //return obj;
                        //const temps = {
                        //   "lokasi": _obj.lokasi,
                        //   "jarak": _obj.jarak,
                        //    "latitude":_obj.latitude,
                        //    "longitude":_obj.longitude
                        //}
                        const aobj = {};
                        aobj['lokasi'] = _obj.lokasi;
                        aobj['jarak'] = _obj.jarak;
                        aobj['latitude'] = _obj.latitude;
                        aobj['longitude'] = _obj.longitude;

                        obj.push(aobj);
                        //obj.push(temps);

                    }

                });

                //console.log(ob);
                //localStorage.setItem("finalSPBG", JSON.stringify(obj));
                return obj;
                // Close pointsInCircle
            };

        </script>
        }